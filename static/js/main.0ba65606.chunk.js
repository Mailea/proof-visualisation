(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{153:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(27),a=(n(51),n(2)),o=n(3),s=n(7),l=n(4),c=n(6),u=n(20),h=n(16),d=(n(52),n(17)),p=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("nav",{id:"navigationBar"},r.createElement("button",{onClick:function(){return history.back()}},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(d,"#nav-back")})),r.createElement("span",null,"Back")),r.createElement("small",null,this.props.name),r.createElement("div",{className:"hidden"}))}}]),t}(r.Component),g=n(8),f=n(5),v=n.n(f),m=n(9),y=(n(55),n(17)),b=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).slider=r.createRef(),n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.historyLength,i=t.currentTime,a=t.onCurrentTimeChange;return r.createElement("section",{className:"component-slider"},r.createElement("button",{disabled:i<=0,onClick:function(){return a(i-1)}},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(y,"#history-back")}))),r.createElement("section",{className:"wrapper"},r.createElement("input",{ref:this.slider,type:"range",min:0,max:n,value:i,onChange:function(){return a(e.getSliderValue())}})),r.createElement("button",{disabled:i>=n,onClick:function(){return a(i+1)}},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(y,"#history-forward")}))))}},{key:"getSliderValue",value:function(){return this.slider.current?parseInt(this.slider.current.value,10):0}}]),t}(r.Component),S=n(24),w=(n(56),n(45)),k=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).name="SatVisAssertionError",n}return Object(c.a)(t,e),t}(Object(w.a)(Error));function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new k("Assertion failed: "+(t||""))}var E=n(57),N=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).markers=new Set,n.network=null,n.networkNodes=new S.DataSet([]),n.networkEdges=new S.DataSet([]),n.graphContainer=r.createRef(),n.dragStartEvent=null,n.cachedChangeNodesEvent=void 0,n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.generateNetwork(),this.updateNetwork(!1),this.network.selectNodes(this.props.nodeSelection),this.network.fit()}},{key:"componentDidUpdate",value:function(e){if(this.props.dag!==e.dag)this.updateNetwork(!1),this.network.selectNodes(this.props.nodeSelection),this.props.animateDagChanges?this.network.fit({nodes:this.props.nodeSelection.map(function(e){return e.toString()}),animation:!0}):this.network.fit();else{this.props.nodeSelection!==e.nodeSelection&&this.network.selectNodes(this.props.nodeSelection),this.props.currentTime!==e.currentTime&&this.updateNetwork(!0);var t=this.props.changedNodesEvent;if(t!==e.changedNodesEvent&&(x(void 0!==t),t!==this.cachedChangeNodesEvent)){this.cachedChangeNodesEvent=t;var n=new Array,r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;if(this.props.dag.nodes.has(l)){var c={id:l,label:this.props.dag.get(l).toHTMLString(this.props.currentTime)};n.push(c)}}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}this.networkNodes.update(n)}}}},{key:"render",value:function(){return r.createElement("section",{className:"component-graph",ref:this.graphContainer},r.createElement("canvas",null))}},{key:"generateNetwork",value:function(){var e=this;x(this.graphContainer.current),x(!this.network),this.network=new S.Network(this.graphContainer.current,{nodes:this.networkNodes,edges:this.networkEdges},{physics:!1,interaction:{multiselect:!1}}),this.network.on("click",function(){var t=Object(m.a)(v.a.mark(function t(n){var r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.nodes.length>0?(x(1===n.nodes.length),r=n.nodes[0],x(void 0!==(i=n.event.srcEvent)&&null!==i),i.metaKey||i.ctrlKey?void 0!==e.props.nodeSelection.find(function(e){return e===r})?e.props.onNodeSelectionChange(e.props.nodeSelection.filter(function(e){return e!==r})):e.props.onNodeSelectionChange(e.props.nodeSelection.concat(n.nodes)):e.props.onNodeSelectionChange(n.nodes)):e.props.onNodeSelectionChange([]);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),this.network.on("dragStart",function(t){x(void 0!==t&&null!==t),x(void 0!==t.nodes&&null!==t.nodes),e.dragStartEvent=t,t.nodes.length>0&&e.props.onNodeSelectionChange(t.nodes)}),this.network.on("dragEnd",function(t){if(x(void 0!==e.dragStartEvent&&null!==e.dragStartEvent),x(void 0!==e.dragStartEvent.nodes&&null!==e.dragStartEvent.nodes),x(void 0!==t&&null!==t),x(void 0!==t.nodes&&null!==t.nodes),t.nodes.length>0&&!e.props.dag.isPassiveDag){var n=t.pointer.canvas.x-e.dragStartEvent.pointer.canvas.x,r=t.pointer.canvas.y-e.dragStartEvent.pointer.canvas.y;e.props.onUpdateNodePositions(t.nodes,[n/-70,r/-120])}})}},{key:"updateNetwork",value:function(e){var t=this.props,n=t.dag,r=t.currentTime,i=new Array,a=new Array,o=0,s=n.isPassiveDag?n.styleMap:this.computeNodePartition(n,r),l=!0,c=!1,u=void 0;try{for(var h,d=n.nodes[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value,f=Object(g.a)(p,2),v=f[0],m=f[1],y=s.get(v);if(x(void 0!==y,"invar"),"hidden"===y){var b={id:v,hidden:!0};i.push(b)}else{var S=this.toVisNode(m,y,m.getPosition());i.push(S)}var w=!0,k=!1,E=void 0;try{for(var N,C=m.parents[Symbol.iterator]();!(w=(N=C.next()).done);w=!0){var T=N.value,O=this.toVisEdge(o,T,m.id,"hidden"===y);o+=1,a.push(O)}}catch(L){k=!0,E=L}finally{try{w||null==C.return||C.return()}finally{if(k)throw E}}}}catch(L){c=!0,u=L}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}e?(this.networkNodes.update(i),this.networkEdges.update(a)):(this.networkNodes.clear(),this.networkNodes.add(i),this.networkEdges.clear(),this.networkEdges.add(a))}},{key:"computeNodePartition",value:function(e,t){var n=e.computeNodesInActiveDag(t),r=new Map,i=!0,a=!1,o=void 0;try{for(var s,l=e.nodes[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,u=Object(g.a)(c,2),h=u[0],d=u[1],p=null!==d.deletionTime&&d.deletionTime<=t;if(e.nodeIsTheoryAxiom(h))r.set(h,p?"theory-axiom-deleted":"theory-axiom");else if(d.isFromPreprocessing)"negated conjecture"===d.inferenceRule?r.set(h,"conjecture"):r.set(h,p?"preprocessing-deleted":"preprocessing");else null!==d.activeTime&&d.activeTime<=t?r.set(h,p?"activated-deleted":"activated"):n.has(h)?r.set(h,"deleted"):r.set(h,"hidden")}}catch(f){a=!0,o=f}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return r}},{key:"toVisNode",value:function(e,t,n){var r=E[t],i=this.markers.has(e.id);return{id:e.id,label:e.toHTMLString(this.props.currentTime),labelHighlightBold:!1,shape:"box",color:{border:i?r.markedStyle.border:r.defaultStyle.border,background:i?r.markedStyle.background:r.defaultStyle.background,highlight:{border:r.highlightStyle.border,background:r.highlightStyle.background}},font:{color:r.text,multi:!0},hidden:!1,x:Math.round(-70*n[0]),y:Math.round(-120*n[1])}}},{key:"toVisEdge",value:function(e,t,n,r){return{id:e,arrows:"to",color:{color:"#dddddd",highlight:"#f8cfc1"},from:t,to:n,smooth:!1,hidden:r}}},{key:"findNodeAt",value:function(e){return this.network.getNodeAt({x:e.layerX,y:e.layerY})}},{key:"toggleMarker",value:function(e){x(this.networkNodes),this.markers.has(e)?this.markers.delete(e):this.markers.add(e),this.updateNetwork(!0)}}]),t}(r.Component),C=n(28),T=n.n(C),O=(n(68),n(40)),L=n.n(O),j=n(17),P=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={draggable:!1},n.keep=!0,n.toList=function(e,t,i){var a="premise"===i?t.premiseLiterals:"conclusion"===i?t.conclusionLiterals:t.contextLiterals;return r.createElement(L.a,{options:{group:"shared"},tag:"ul",id:"premise"===i?"id1":"conclusion"===i?"id2":"id3",onChange:function(t,r,i){var a="id1"===i.from.id?"premise":"id2"===i.from.id?"conclusion":"context",o="id1"===i.to.id?"premise":"id2"===i.to.id?"conclusion":"context";a===o&&x(n.keep),n.keep&&n.props.onLiteralOrientationChange(e,[a,i.oldIndex],[o,i.newIndex]),a!==o&&(n.keep=!n.keep)}},a.map(function(e,t){return n.toListItem(e,t,i)}))},n.toListItem=function(e,t,i){return r.createElement("li",{key:t,"data-id":t,onDoubleClick:function(t){n.props.onLiteralRepresentationChange(n.props.node.id,e),t.currentTarget.innerText=e.toString("premise"===i)}},e.toString("premise"===i))},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=new Array;t.push("Childs: "+this.props.numberOfTransitiveActivatedChildren.toString());var n=!0,i=!1,a=void 0;try{for(var o,s=this.props.node.statistics[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,c=Object(g.a)(l,2),u=c[0],h=c[1];["nSel","inD"].includes(u)||("a"===u?u="Age":"w"===u&&(u="Weight"),t.push("".concat(u,": ").concat(h)))}}catch(d){i=!0,a=d}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r.createElement("section",{className:"component-node-details details"},r.createElement("article",null,r.createElement("h2",null,"Node ",r.createElement("strong",null,this.props.node.id)),r.createElement("div",{className:"button-bar"},r.createElement("button",{className:"toggle-button"+(this.props.infoToggle?" toggled":""),title:this.props.infoToggle?"Hide statistics":"Show statistics",onClick:this.props.onToggleInfo},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(j,"#toggle-info")}))),r.createElement("button",{className:"toggle-button"+(this.props.editToggle?" toggled":""),title:this.props.editToggle?"Terminate edit mode":"Enter edit mode",onClick:this.props.onToggleEdit,disabled:"Clause"!==this.props.node.unit.type},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(j,"#toggle-edit")})))),r.createElement("h3",null,this.props.node.inferenceRule),this.props.infoToggle&&r.createElement("ul",{className:"stats"},t.map(function(e,t){return r.createElement("li",{key:t},e)})),"Clause"===this.props.node.unit.type&&this.props.editToggle?r.createElement("section",{className:"literal-wrapper"+(this.state.draggable?" drag":""),onMouseEnter:function(){return e.setState({draggable:!0})},onMouseLeave:function(){return e.setState({draggable:!1})}},this.toList(this.props.node.id,this.props.node.unit,"premise"),r.createElement("span",{className:"separator separator-arrow count-"+this.props.node.unit.premiseLiterals.length},"\u2192"),this.toList(this.props.node.id,this.props.node.unit,"conclusion"),r.createElement("span",{className:"separator separator-line count-"+this.props.node.unit.contextLiterals.length},"\xa0"),this.toList(this.props.node.id,this.props.node.unit,"context")):r.createElement("section",{className:"literal-wrapper read-mode"},this.props.node.unit.toHTMLString(!1))))}}]),t}(r.Component),R=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(1===this.props.nodeSelection.length){var e=this.props.dag.get(this.props.nodeSelection[0]);return r.createElement(P,{node:e,numberOfTransitiveActivatedChildren:this.props.dag.numberOfTransitiveActivatedChildren(e.id,this.props.currentTime),infoToggle:this.props.infoToggle,editToggle:this.props.editToggle,onLiteralOrientationChange:this.props.onLiteralOrientationChange,onLiteralRepresentationChange:this.props.onLiteralRepresentationChange,onToggleInfo:this.props.onToggleInfo,onToggleEdit:this.props.onToggleEdit})}return r.createElement("section",{className:"component-node-details overview"},r.createElement("small",{id:"nodeInfo"},r.createElement("strong",null,"".concat(this.props.nodeSelection.length," nodes"))," selected"))}}]),t}(r.Component),A=n(17),I=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;x(this.props.dag.isPassiveDag),x(null!==this.props.dag.styleMap);var t=1===this.props.nodeSelection.length&&"passive"===this.props.dag.styleMap.get(this.props.nodeSelection[0]);return r.createElement("aside",{className:"component-passive-aside"},r.createElement("section",{className:"component-graph-menu"},r.createElement("button",{title:"Select clauses",disabled:!t,onClick:function(){e.props.onSelectButtonPressed()}},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(A,"#graph-s")})))),r.createElement(R,{dag:this.props.dag,nodeSelection:this.props.nodeSelection,currentTime:this.props.currentTime,infoToggle:this.props.infoToggle,editToggle:this.props.editToggle,onLiteralOrientationChange:this.props.onLiteralOrientationChange,onLiteralRepresentationChange:this.props.onLiteralRepresentationChange,onToggleInfo:this.props.onToggleInfo,onToggleEdit:this.props.onToggleEdit}))}}]),t}(r.Component),D=n(44),F=function(){function e(t,n,r,i,o,s,l,c,u,h,d){Object(a.a)(this,e),this.id=void 0,this.unit=void 0,this.inferenceRule=void 0,this.parents=void 0,this.statistics=void 0,this.isFromPreprocessing=void 0,this.newTime=void 0,this.activeTime=void 0,this.deletionTime=void 0,this.deletionParents=void 0,this.position=void 0,this.isBoundary=void 0,this.id=t,this.unit=n,this.inferenceRule=r,this.parents=i,this.statistics=o,this.isFromPreprocessing=s,this.newTime=l,this.activeTime=c,this.deletionTime=u,this.deletionParents=h,this.position=null,this.isBoundary=d}return Object(o.a)(e,[{key:"copy",value:function(){return new e(this.id,this.unit,this.inferenceRule,this.parents,this.statistics,this.isFromPreprocessing,this.newTime,this.activeTime,this.deletionTime,this.deletionParents,this.isBoundary)}},{key:"getPosition",value:function(){return x(null!==this.position,"accessing position of node with id ".concat(this.id,", which has not been computed")),this.position}},{key:"toString",value:function(){return this.unit.toString()}},{key:"toHTMLString",value:function(e){var t=null!==this.activeTime&&this.activeTime<=e;return this.unit.toHTMLString(t)}}]),e}(),M=function(){function e(t){Object(a.a)(this,e),this.type=void 0,this.formula=void 0,this.type="Formula",this.formula=t}return Object(o.a)(e,[{key:"toString",value:function(){return this.formula}},{key:"toHTMLString",value:function(e){return this.formula}}]),e}(),B=function(){function e(t){Object(a.a)(this,e),this.type=void 0,this.premiseLiterals=void 0,this.conclusionLiterals=void 0,this.contextLiterals=void 0,this.literalsNewEvent=void 0,this.literalsActiveEvent=void 0,this.type="Clause",this.premiseLiterals=[],this.conclusionLiterals=t,this.contextLiterals=[],this.literalsNewEvent=null,this.literalsActiveEvent=null}return Object(o.a)(e,[{key:"changeLiteralOrientation",value:function(e,t){var n=null;"premise"===e[0]?(x(0<=e[1]),x(e[1]<this.premiseLiterals.length),n=this.premiseLiterals.splice(e[1],1)):"conclusion"===e[0]?(x(0<=e[1]),x(e[1]<this.conclusionLiterals.length),n=this.conclusionLiterals.splice(e[1],1)):(x(0<=e[1]),x(e[1]<this.contextLiterals.length),n=this.contextLiterals.splice(e[1],1)),x(1===n.length);var r=n[0];"premise"===t[0]?(x(0<=t[1]),x(t[1]<=this.premiseLiterals.length),this.premiseLiterals.splice(t[1],0,r)):"conclusion"===t[0]?(x(0<=t[1]),x(t[1]<=this.conclusionLiterals.length),this.conclusionLiterals.splice(t[1],0,r)):(x(0<=t[1]),x(t[1]<=this.contextLiterals.length),this.contextLiterals.splice(t[1],0,r)),r.orientationReason="user"}},{key:"toString",value:function(){return 0===this.premiseLiterals.length&&0===this.conclusionLiterals.length&&0===this.contextLiterals.length?"$false":this.premiseLiterals.concat(this.conclusionLiterals,this.contextLiterals).map(function(e){return e.toString(!1)}).join(" | ")}},{key:"toHTMLString",value:function(e){var t=this.premiseLiterals.map(function(e){return e.isSelected?"<b>"+e.toString(!0)+"</b>":e.toString(!0)}).join(" & "),n=this.conclusionLiterals.map(function(e){return e.isSelected?"<b>"+e.toString(!1)+"</b>":e.toString(!1)}).join(" | "),r=this.contextLiterals.map(function(e){return e.isSelected?"<b>"+e.toString(!1)+"</b>":e.toString(!1)}).join(" | "),i=this.premiseLiterals.map(function(e){return e.toString(!0)}).join(" & "),a=this.conclusionLiterals.map(function(e){return e.toString(!1)}).join(" | "),o=this.contextLiterals.map(function(e){return e.toString(!1)}).join(" | ");0===this.conclusionLiterals.length&&(n="$false",a="$false");var s=Math.ceil(.8*Math.max(i.length,a.length,o.length)),l="\u2013".repeat(s);e||(t=i,n=a,r=o);var c=0===this.premiseLiterals.length?n:t+"\n\u2192\n"+n;return 0===this.contextLiterals.length?c:c+"\n"+l+"\n"+r}}]),e}(),q=function(){function e(t,n,r){Object(a.a)(this,e),this.name=void 0,this.args=void 0,this.negated=void 0,this.isSelected=void 0,this.representation=void 0,this.hideBracketsAssoc=void 0,this.nonStrictForNegatedStrictInequalities=void 0,this.literalInParent=void 0,this.orientationReason=void 0,this.name=t,this.args=n,this.negated=r,this.isSelected=!1,this.representation=0,this.hideBracketsAssoc=!0,this.nonStrictForNegatedStrictInequalities=!0,this.literalInParent=null,this.orientationReason="none"}return Object(o.a)(e,[{key:"setLiteralInParent",value:function(e){this.literalInParent=e}},{key:"switchToNextRepresentation",value:function(){"$less"!==this.name&&"Sub"!==this.name&&"="!==this.name||(0===this.representation?this.representation=1:this.representation=0)}},{key:"toString",value:function(e){var t=this,n=e?!this.negated:this.negated;if("="===this.name){x(2===this.args.length,"equalities must have exactly two arguments");var r=1===this.representation;return this.args[r?1:0].toString(this.hideBracketsAssoc)+(n?" != ":" = ")+this.args[r?0:1].toString(this.hideBracketsAssoc)}if("$less"===this.name||"Sub"===this.name){x(2===this.args.length,"inequalities must have exactly two arguments");var i=1===this.representation,a=this.args[i?1:0].toString(this.hideBracketsAssoc),o=this.args[i?0:1].toString(this.hideBracketsAssoc);return a+(i?n?this.nonStrictForNegatedStrictInequalities?" <= ":" !> ":" > ":n?this.nonStrictForNegatedStrictInequalities?" >= ":" !< ":" < ")+o}return(n?"!":"")+this.name+"("+this.args.map(function(e){return e.toString(t.hideBracketsAssoc)}).join(",")+")"}}]),e}(),U=function(){function e(t,n){Object(a.a)(this,e),this.name=void 0,this.args=void 0,this.isVariable=void 0,this.name=t,this.args=n;var r=t.startsWith("X");this.isVariable=r,r&&x(0===this.args.length)}return Object(o.a)(e,[{key:"toString",value:function(e){var t=this.name;if("$sum"===this.name?t="+":"$uminus"===this.name&&(t="-"),0===this.args.length)return t;if("+"===t){var n=this.args.map(function(t){return t.toString(e)}).join("+");return e?n:"("+n+")"}return t+"("+this.args.map(function(t){return t.toString(e)}).join(",")+")"}}]),e}(),V=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,null,[{key:"parsePreprocessingUnit",value:function(t){return t.match(/^[a-zA-Z0-9()=,~!$ |']+$/)?e.parseClause(t):new M(t)}},{key:"parseClause",value:function(t){if("$false"===t)return new B([]);for(var n=t.split(" | "),r=new Array,i=0;i<n.length;i++)r.push(e.parseLiteral(n[i]));return new B(r)}},{key:"parseLiteral",value:function(t){var n=t.search("=");if(-1!==n){if("("===t[0]&&(x(")"===t[t.length-1]),t=t.substring(1,t.length-1),x(n>0),n-=1),"!"===t[n-1]){x(" "===t[n-2],"negated equality not surrounded by spaces in string ".concat(t)),x(" "===t[n+1],"negated equality not surrounded by spaces in string ".concat(t));var r=t.substring(0,n-2),i=t.substring(n+2,t.length),a=e.parseTerm(r),o=e.parseTerm(i);return new q("=",[a,o],!0)}x(" "===t[n-1],"equality not surrounded by spaces in string ".concat(t)),x(" "===t[n+1],"equality not surrounded by spaces in string ".concat(t));var s=t.substring(0,n-1),l=t.substring(n+2,t.length),c=e.parseTerm(s),u=e.parseTerm(l);return new q("=",[c,u],!1)}var h="~"===t[0],d=h?t.substring(1):t,p=e.parseTerm(d);return new q(p.name,p.args,h)}},{key:"parseTerm",value:function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("("===r||")"===r||","===r)t.push(r),n+=1;else{for(var i=n;i<e.length&&"("!==e[i]&&")"!==e[i]&&","!==e[i];)i+=1;t.push(e.substring(n,i)),n=i}}for(var a=0;a<t.length;a++){var o=t[a];"("!==o&&")"!==o&&","!==o&&(a+1!==t.length&&"("===t[a+1]||(t.splice(a+1,0,"("),t.splice(a+2,0,")")))}for(var s=[[]],l=0;l<t.length;l++){var c=t[l];if("("!==c&&")"!==c&&","!==c)s[s.length-1].push(c);else if("("===c)s.push([]);else if(")"===c){var u=s.pop(),h=s[s.length-1].pop(),d=new U(h,u);s[s.length-1].push(d)}}return x(1===s.length,"invar violated for string: "+e),s[0][0]}}]),e}(),H=function(){function e(t){Object(a.a)(this,e),this.dag=void 0,this.todo=void 0,this.visited=void 0,this.dag=t,this.todo=Array.from(t.leaves),this.visited=new Set}return Object(o.a)(e,[{key:"hasNext",value:function(){for(;this.todo.length>0;){var e=this.todo[length-1];if(!this.visited.has(e))return!0;this.todo.pop()}return!1}},{key:"getNext",value:function(){for(;this.todo.length>0;){var e=this.todo[this.todo.length-1],t=this.dag.get(e);if(this.visited.has(e))this.todo.pop();else{var n=!1,r=!0,i=!1,a=void 0;try{for(var o,s=t.parents[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;this.visited.has(l)||(this.todo.push(l),n=!0)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}if(!n)return this.visited.add(e),this.todo.pop(),t}}return x(!1,"We have already iterated through all the inferences, so getNext() should not been called"),null}}]),e}(),W=function(){function e(t){Object(a.a)(this,e),this.postOrder=void 0;var n=new H(t);for(this.postOrder=[];n.hasNext();)this.postOrder.push(n.getNext())}return Object(o.a)(e,[{key:"hasNext",value:function(){return this.postOrder.length>0}},{key:"getNext",value:function(){return x(this.hasNext(),"We have already iterated through all the inferences, so getNext() should not have been called"),this.postOrder.pop()}}]),e}();function $(e,t,n){return n?function(e,t){if(e.name!==t.name||e.negated!==t.negated||e.args.length!==t.args.length)return!1;for(var n=!0,r=new Map,i=0;i<e.args.length;i++){var a=e.args[i],o=t.args[i];if(!(n=J(a,o,r)))break}if(!n&&"="===e.name){x(2===e.args.length);var s=new Map;(n=J(e.args[0],t.args[1],s))&&(n=J(e.args[1],t.args[0],s))}return n}(e,t):function(e,t){if(e.name!==t.name||e.negated!==t.negated||e.args.length!==t.args.length)return!1;for(var n=!0,r=0;r<e.args.length;r++){var i=e.args[r],a=t.args[r];if(!z(i,a)){n=!1;break}}n||"="!==e.name||(x(2===e.args.length),n=z(e.args[0],t.args[1])&&z(e.args[1],t.args[0]));return n}(e,t)}function z(e,t){if(e.name!==t.name||e.args.length!==t.args.length)return!1;for(var n=0;n<e.args.length;n++){if(!z(e.args[n],t.args[n]))return!1}return!0}function J(e,t,n){if(e.name===t.name&&e.args.length===t.args.length){for(var r=0;r<e.args.length;r++){if(!J(e.args[r],t.args[r],n))return!1}return!0}if(t.isVariable){var i=n.get(t.name);return void 0===i?(n.set(t.name,e),!0):J(e,i,n)}return!1}var K=function e(t,n,r,i,o,s){Object(a.a)(this,e),this.type=void 0,this.id=void 0,this.unitString=void 0,this.inferenceRule=void 0,this.parents=void 0,this.statistics=void 0,this.type=t,this.id=n,this.unitString=r,this.inferenceRule=i,this.parents=o,this.statistics=s},G=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(a.a)(this,e),this.nodes=void 0,this.leaves=void 0,this.mergeMap=void 0,this.isPassiveDag=void 0,this.styleMap=void 0,this.activeNodeId=void 0,this.nodes=t,this.mergeMap=n,x(!r||null!==i),x(!r||null!==o),x(!r||t.has(o)),this.isPassiveDag=r,this.styleMap=i,this.activeNodeId=o;var s=!0,l=!1,c=void 0;try{for(var u,h=t[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value,p=Object(g.a)(d,2),f=p[0],v=p[1];x(f===v.id,"key ".concat(f," and id ").concat(v.id," of node ").concat(v," don't match!"))}}catch(Q){l=!0,c=Q}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}var m=!0,y=!1,b=void 0;try{for(var S,w=t[Symbol.iterator]();!(m=(S=w.next()).done);m=!0){var k=S.value,E=Object(g.a)(k,2),N=E[0],C=E[1],T=!0,O=!1,L=void 0;try{for(var j,P=C.parents[Symbol.iterator]();!(T=(j=P.next()).done);T=!0){var R=j.value;x(t.has(R),"node ".concat(N," has parent ").concat(R," which does not occur as node in the dag!"))}}catch(Q){O=!0,L=Q}finally{try{T||null==P.return||P.return()}finally{if(O)throw L}}}}catch(Q){y=!0,b=Q}finally{try{m||null==w.return||w.return()}finally{if(y)throw b}}var A=new Set,I=new Set,D=!0,F=!1,M=void 0;try{for(var B,q=t.values()[Symbol.iterator]();!(D=(B=q.next()).done);D=!0){var U=B.value,V=!0,H=!1,W=void 0;try{for(var $,z=U.parents[Symbol.iterator]();!(V=($=z.next()).done);V=!0){var J=$.value;I.add(J)}}catch(Q){H=!0,W=Q}finally{try{V||null==z.return||z.return()}finally{if(H)throw W}}}}catch(Q){F=!0,M=Q}finally{try{D||null==q.return||q.return()}finally{if(F)throw M}}var K=!0,G=!1,X=void 0;try{for(var _,Y=t.keys()[Symbol.iterator]();!(K=(_=Y.next()).done);K=!0){var Z=_.value;I.has(Z)||A.add(Z)}}catch(Q){G=!0,X=Q}finally{try{K||null==Y.return||Y.return()}finally{if(G)throw X}}this.leaves=A}return Object(o.a)(e,[{key:"get",value:function(e){var t=this.nodes.get(e);return x(void 0!==t,"node doesn't occur in Dag"),t}},{key:"maximalActiveTime",value:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var i,a=this.nodes.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;null!==o.activeTime&&o.activeTime>e&&(e=o.activeTime)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"isEmpty",value:function(){return 0===this.nodes.size}},{key:"getChildren",value:function(e){this.nodes.has(e)||x(!1,"Node with id "+e+" does not occur in Dag");var t=new Array,n=!0,r=!1,i=void 0;try{for(var a,o=this.nodes.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,c=!1,u=void 0;try{for(var h,d=s.parents[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){h.value===e&&t.push(s.id)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"numberOfTransitiveActivatedChildren",value:function(e,t){for(var n=0,r=new Set([e]),i=new H(this);i.hasNext();){var a=i.getNext(),o=!1,s=!0,l=!1,c=void 0;try{for(var u,h=a.parents[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;if(r.has(d)){o=!0;break}}}catch(v){l=!0,c=v}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}var p=o||r.has(a.id),g=a.isFromPreprocessing||null!==a.newTime&&a.newTime<=t;if(p&&g){r.add(a.id);var f=null!==a.activeTime&&a.activeTime<=t;a.id!==e&&f&&(n+=1)}}return n}},{key:"nodeIsInputNode",value:function(e){var t=this.get(e);return!!t.isFromPreprocessing&&null===t.newTime}},{key:"nodeIsTheoryAxiom",value:function(e){var t=this.get(e);return!!t.isFromPreprocessing&&("theory axiom"===t.inferenceRule||"term algebras injectivity"===t.inferenceRule||"term algebras distinctness"===t.inferenceRule||"term algebras exhaustiveness"===t.inferenceRule||1===t.parents.length&&"term algebras exhaustiveness"===this.get(t.parents[0]).inferenceRule)}},{key:"computeActiveNodes",value:function(e){var t=new Set,n=!0,r=!1,i=void 0;try{for(var a,o=this.nodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=Object(g.a)(s,2),c=l[0],u=l[1];null!==u.activeTime&&u.activeTime<=e&&t.add(c)}}catch(h){r=!0,i=h}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"computeNodesInActiveDag",value:function(e){for(var t=this.computeActiveNodes(e),n=new W(this);n.hasNext();){var r=n.getNext(),i=r.id;if(t.has(i)){var a=!0,o=!1,s=void 0;try{for(var l,c=r.parents[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;t.add(u)}}catch(m){o=!0,s=m}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}}var h=!0,d=!1,p=void 0;try{for(var g,f=this.nodes.values()[Symbol.iterator]();!(h=(g=f.next()).done);h=!0){var v=g.value;v.isFromPreprocessing&&t.add(v.id)}}catch(m){d=!0,p=m}finally{try{h||null==f.return||f.return()}finally{if(d)throw p}}return t}},{key:"isRefutation",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.nodes.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;if("Clause"==a.unit.type&&0==a.unit.premiseLiterals.length&&0==a.unit.conclusionLiterals.length)return!0}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!1}}],[{key:"fromParsedLines",value:function(t,n){var r=null===n?new Map:new Map(n.nodes),i=null,a=null===n?0:n.maximalActiveTime(),o=null,s=!0,l=!1,c=void 0;try{for(var u,h=t[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;if(null!==n&&null!==n.mergeMap){x(void 0===n.mergeMap.get(d.id),"found line with id ".concat(d.id," of node deleted during merge of preprocessing nodes!"));var p=new Array,g=!0,f=!1,v=void 0;try{for(var m,y=d.parents[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var b=m.value,S=n.mergeMap.get(b);void 0!==S?p.push.apply(p,Object(D.a)(S)):p.push(b)}}catch(W){f=!0,v=W}finally{try{g||null==y.return||y.return()}finally{if(f)throw v}}d.parents=p}if("preprocessing"===d.type){x(null===n,"no new preprocessing lines should occur while extending existing dag with new nodes from saturation"),x(!r.has(d.id),"each clause must be generated by preprocessing only once");var w=V.parsePreprocessingUnit(d.unitString);if("negated conjecture"===d.inferenceRule){x(1===d.parents.length);var k=r.get(d.parents[0]);x(void 0!==k),x("input"===k.inferenceRule),x(r.delete(d.parents[0])),d.parents=[]}i=new F(d.id,w,d.inferenceRule,d.parents,d.statistics,!0,null,null,null,[],!1),r.set(i.id,i)}else if("new"===d.type)if(r.has(d.id)){x(null===n,"no new final clauses from preprocessing should occur during the extension of an existing dag"),x((i=r.get(d.id)).isFromPreprocessing,"a newly added clause can only already exist if it was generated during preprocessing"),x(d.inferenceRule===i.inferenceRule,"inference rule differs between line and existing node");var E=V.parseClause(d.unitString);E.literalsNewEvent=E.conclusionLiterals,i.unit=E,i.newTime=a}else{var N=V.parseClause(d.unitString);N.literalsNewEvent=N.conclusionLiterals,i=new F(d.id,N,d.inferenceRule,d.parents,d.statistics,!1,a,null,null,[],!1),r.set(i.id,i),"$false"===d.unitString&&(o=i)}else if("active"===d.type){x(r.has(d.id),"Found clause with id ".concat(d.id,", which was added to active, but wasn't added to new before. Maybe you forgot to output the new clauses?")),i=r.get(d.id),x(d.id===i.id,"id differs between line and existing node"),x(d.inferenceRule===i.inferenceRule,"inference rule differs between line and existing node"),x(d.parents.length===i.parents.length,"number of parents differs between line and existing node");for(var C=0;C<d.parents.length;C++)x(d.parents[C]===i.parents[C],"line and node differ on parent ".concat(C,", which is ").concat(d.parents[C]," resp. ").concat(i.parents[C],"."));x(null!==i.newTime,"for each event [SA] active ... there has to be an earlier event of the form [SA] new ... with the same clause!"),x(null===i.activeTime,"there must only be 1 event of the form [SA] active ... for each clause"),x("Clause"===i.unit.type);var T=i.unit;x(null!==T.literalsNewEvent);var O=V.parseClause(d.unitString);x(0===O.premiseLiterals.length);var L=d.statistics.get("nSel");x(void 0!==L&&null!==L);for(var j=new Array,P=0;P<O.conclusionLiterals.length;P++){var R=O.conclusionLiterals[P],A=!1,I=!0,M=!1,B=void 0;try{for(var q,U=T.literalsNewEvent[Symbol.iterator]();!(I=(q=U.next()).done);I=!0){var H=q.value;if($(R,H,!1)){j.push(H),A=!0,P<L&&(H.isSelected=!0);break}}}catch(W){M=!0,B=W}finally{try{I||null==U.return||U.return()}finally{if(M)throw B}}x(A)}T.literalsActiveEvent=j,a+=1,i.activeTime=a,i.statistics=d.statistics}else"forward reduce"===d.type||"backward reduce"===d.type?(x(r.has(d.id),"Found clause with id ".concat(d.id,", which was deleted, but wasn't added as new before. Maybe you forgot to output the new clauses?")),(i=r.get(d.id)).deletionTime=a):"replaced by"===d.type||"using"===d.type?(x(null!==i,"invar"),i.deletionParents.push(d.id)):x(!1,"invalid line: ".concat(d.unitString))}}catch(W){l=!0,c=W}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}return null!==o&&(a+=1,o.activeTime=a,r.set(o.id,o)),new e(r,null===n?null:n.mergeMap)}}]),e}();function X(e,t){for(var n=new Set(t),r=new Map,i=new W(e);i.hasNext();){var a=i.getNext(),o=a.id;n.has(o)&&(a.parents.forEach(function(e){return n.add(e)}),r.set(o,a))}var s=new Map,l=!0,c=!1,u=void 0;try{for(var h,d=r[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value,f=Object(g.a)(p,2),v=f[0],m=f[1];s.set(v,m.copy())}}catch(y){c=!0,u=y}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return new G(s)}function _(e,t){for(var n=new Set(t),r=new Map,i=new H(e);i.hasNext();){var a=i.getNext(),o=!1,s=!0,l=!1,c=void 0;try{for(var u,h=a.parents[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;n.has(d)&&(o=!0)}}catch(R){l=!0,c=R}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}if(n.has(a.id)||o){if(n.add(a.id),o){var p=!0,f=!1,v=void 0;try{for(var m,y=a.parents[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=m.value;if(!n.has(b)){var S=Y(e.get(b));x(!e.leaves.has(S.id),"invar violated. Boundary nodes should only occur as parents of nodes"),r.set(S.id,S)}}}catch(R){f=!0,v=R}finally{try{p||null==y.return||y.return()}finally{if(f)throw v}}}else a=Y(a);r.set(a.id,a)}}var w=new Map,k=!0,E=!1,N=void 0;try{for(var C,T=r[Symbol.iterator]();!(k=(C=T.next()).done);k=!0){var O=C.value,L=Object(g.a)(O,2),j=L[0],P=L[1];w.set(j,P.copy())}}catch(R){E=!0,N=R}finally{try{k||null==T.return||T.return()}finally{if(E)throw N}}return new G(w)}function Y(e){return new F(e.id,e.unit,e.inferenceRule,[],e.statistics,e.isFromPreprocessing,e.newTime,e.activeTime,e.deletionTime,e.deletionParents,e.isBoundary)}function Z(e){for(var t=new Map(e.nodes),n=new Set,r=new Map,i=new H(e);i.hasNext();){var a=i.getNext().id,o=t.get(a);if(o.isFromPreprocessing){var s=new Array,l=!0,c=!1,u=void 0;try{for(var h,d=o.parents[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value,g=t.get(p);if(x(g.isFromPreprocessing,"invariant violated"),0===g.parents.length)"choice axiom"===g.inferenceRule?n.add(p):s.push(p);else{var f=!0,v=!1,m=void 0;try{for(var y,b=g.parents[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var S=y.value;x(t.get(S).isFromPreprocessing,"invariant violated"),s.push(S)}}catch(L){v=!0,m=L}finally{try{f||null==b.return||b.return()}finally{if(v)throw m}}n.add(p),r.set(p,g.parents)}}}catch(L){c=!0,u=L}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}var w=new F(o.id,o.unit,o.inferenceRule,s,o.statistics,o.isFromPreprocessing,o.newTime,o.activeTime,o.deletionTime,o.deletionParents,o.isBoundary);t.set(a,w)}}var k=!0,E=!1,N=void 0;try{for(var C,T=n[Symbol.iterator]();!(k=(C=T.next()).done);k=!0){var O=C.value;x(t.delete(O),"invar violated")}}catch(L){E=!0,N=L}finally{try{k||null==T.return||T.return()}finally{if(E)throw N}}return new G(t,r)}function Q(e,t,n){x(t.length>0);for(var r=new Set(t),i=new Set,a=new Map,o=new H(e);o.hasNext();){var s=o.getNext(),l=s.id,c=new Set;if(null!==s.activeTime&&s.activeTime<=n||s.isFromPreprocessing)r.has(l)&&c.add(l);else{var u=!0,h=!1,d=void 0;try{for(var p,g=s.parents[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){var f=p.value,v=a.get(f);x(void 0!==v);var m=!0,y=!1,b=void 0;try{for(var S,w=v[Symbol.iterator]();!(m=(S=w.next()).done);m=!0){var k=S.value;c.add(k)}}catch(K){y=!0,b=K}finally{try{m||null==w.return||w.return()}finally{if(y)throw b}}}}catch(K){h=!0,d=K}finally{try{u||null==g.return||g.return()}finally{if(h)throw d}}null!==s.newTime&&s.newTime<=n&&!(null!==s.activeTime&&s.activeTime<=n)&&!(null!==s.deletionTime&&s.deletionTime<=n)&&c.size===r.size&&i.add(l)}a.set(l,c)}var E=new Map,N=new Map,C=new Set(i),T=!0,O=!1,L=void 0;try{for(var j,P=t[Symbol.iterator]();!(T=(j=P.next()).done);T=!0){var R=j.value;C.add(R)}}catch(K){O=!0,L=K}finally{try{T||null==P.return||P.return()}finally{if(O)throw L}}for(var A=new W(e);A.hasNext();){var I=A.getNext(),D=I.id;if(C.has(D)){var F=null!==I.deletionTime&&I.deletionTime<=n,M=void 0,B=void 0;if(i.has(D)?(x(!F),I.isFromPreprocessing?(M=!0,B="passive"):(M=!1,B="passive")):e.nodeIsTheoryAxiom(D)?(M=!0,B=F?"theory-axiom-deleted":"theory-axiom"):I.isFromPreprocessing?"negated conjecture"===I.inferenceRule?(M=!0,B="conjecture"):(M=!0,B=F?"preprocessing-deleted":"preprocessing"):null!==I.activeTime&&I.activeTime<=n?(M=!0,B=F?"activated-deleted":"activated"):(M=!1,B="deleted"),M)E.set(D,Y(I));else{E.set(D,I.copy());var q=!0,U=!1,V=void 0;try{for(var $,z=I.parents[Symbol.iterator]();!(q=($=z.next()).done);q=!0){var J=$.value;C.add(J)}}catch(K){U=!0,V=K}finally{try{q||null==z.return||z.return()}finally{if(U)throw V}}}N.set(D,B)}}return new G(E,null,!0,N,t[0])}var ee=n(29),te=n(22);function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(m.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ee.a({Module:te.Module,render:te.render}),e.abrupt("return",n.renderString(t,{format:"plain"}).then(function(e){return e}).catch(function(e){n=new ee.a({Module:te.Module,render:te.render}),console.error(e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ie=/^(\d+) ([0-9.]+) ([0-9.]+).*$/g,ae=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,null,[{key:"layoutNodesAtPosition",value:function(){var t=Object(m.a)(v.a.mark(function t(n,r){var i,a,o,s,l,c,u,h,d,p,f,m,y,b,S,w,k,E,N,C,T,O,L,j,P,R,A,I,D,F;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.layoutNodes(n);case 2:i=null,a=!0,o=!1,s=void 0,t.prev=6,l=n.values()[Symbol.iterator]();case 8:if(a=(c=l.next()).done){t.next=44;break}u=c.value,h=!0,d=!0,p=!1,f=void 0,t.prev=14,m=u.parents[Symbol.iterator]();case 16:if(d=(y=m.next()).done){t.next=24;break}if(b=y.value,!n.has(b)){t.next=21;break}return h=!1,t.abrupt("break",24);case 21:d=!0,t.next=16;break;case 24:t.next=30;break;case 26:t.prev=26,t.t0=t.catch(14),p=!0,f=t.t0;case 30:t.prev=30,t.prev=31,d||null==m.return||m.return();case 33:if(t.prev=33,!p){t.next=36;break}throw f;case 36:return t.finish(33);case 37:return t.finish(30);case 38:if(!h){t.next=41;break}return i=u,t.abrupt("break",44);case 41:a=!0,t.next=8;break;case 44:t.next=50;break;case 46:t.prev=46,t.t1=t.catch(6),o=!0,s=t.t1;case 50:t.prev=50,t.prev=51,a||null==l.return||l.return();case 53:if(t.prev=53,!o){t.next=56;break}throw s;case 56:return t.finish(53);case 57:return t.finish(50);case 58:for(x(null!==i),x(null!==i.position),S=Object(g.a)(r,2),w=S[0],k=S[1],E=i.position,N=Object(g.a)(E,2),C=N[0],T=N[1],O=w-C,L=k-T-1,j=!0,P=!1,R=void 0,t.prev=67,A=n.values()[Symbol.iterator]();!(j=(I=A.next()).done);j=!0)x(null!=(D=I.value).position),F=D.position,D.position=[F[0]+O,F[1]+L];t.next=75;break;case 71:t.prev=71,t.t2=t.catch(67),P=!0,R=t.t2;case 75:t.prev=75,t.prev=76,j||null==A.return||A.return();case 78:if(t.prev=78,!P){t.next=81;break}throw R;case 81:return t.finish(78);case 82:return t.finish(75);case 83:case"end":return t.stop()}},t,null,[[6,46,50,58],[14,26,30,38],[31,,33,37],[51,,53,57],[67,71,75,83],[76,,78,82]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"layoutDag",value:function(){var t=Object(m.a)(v.a.mark(function t(n,r){var i,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.dagToDotString(n,r),t.next=3,ne(i);case 3:a=t.sent,e.parseLayoutString(a,n.nodes);case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"layoutNodes",value:function(){var t=Object(m.a)(v.a.mark(function t(n){var r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.nodesToDotString(n),t.next=3,ne(r);case 3:i=t.sent,e.parseLayoutString(i,n);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"dagToDotString",value:function(e,t){var n=t?e.computeNodesInActiveDag(Number.MAX_SAFE_INTEGER):null,r=new Array,i=new Array,a=new Array,o=!0,s=!1,l=void 0;try{for(var c,u=e.nodes.values()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;x(null===h.position,"the dag has already been layouted!"),h.isFromPreprocessing?e.nodeIsInputNode(h.id)?r.push("".concat(h.id,' [label="').concat(h.toString(),'"]')):i.push("".concat(h.id,' [label="').concat(h.toString(),'"]')):t&&!n.has(h.id)||a.push("".concat(h.id,' [label="').concat(h.toString(),'"]'))}}catch(C){s=!0,l=C}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}var d=new Array,p=!0,g=!1,f=void 0;try{for(var v,m=e.nodes.values()[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var y=v.value;if(!t||n.has(y.id)){var b=!0,S=!1,w=void 0;try{for(var k,E=y.parents[Symbol.iterator]();!(b=(k=E.next()).done);b=!0){var N=k.value;d.push("".concat(N," -> ").concat(y.id))}}catch(C){S=!0,w=C}finally{try{b||null==E.return||E.return()}finally{if(S)throw w}}}}}catch(C){g=!0,f=C}finally{try{p||null==m.return||m.return()}finally{if(g)throw f}}return"digraph {\n\n"+("   subgraph inputgraph {\n      rank=source;\n      "+r.join(";\n      ")+"\n   }")+"\n\n"+("   subgraph preprocessinggraph {\n      rank=same;\n      "+i.join(";\n      ")+"\n   }")+"\n\n"+("   subgraph othergraph {\n      "+a.join(";\n      ")+"\n   }")+"\n\n   "+d.join(";\n   ")+"\n}"}},{key:"nodesToDotString",value:function(e){var t=new Array,n=!0,r=!1,i=void 0;try{for(var a,o=e.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;x(null===s.position,"the node has already been layouted!"),t.push("".concat(s.id,' [label="').concat(s.toString(),'"]'))}}catch(w){r=!0,i=w}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var l=new Array,c=!0,u=!1,h=void 0;try{for(var d,p=e.values()[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var g=d.value,f=!0,v=!1,m=void 0;try{for(var y,b=g.parents[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var S=y.value;e.has(S)&&l.push("".concat(S," -> ").concat(g.id))}}catch(w){v=!0,m=w}finally{try{f||null==b.return||b.return()}finally{if(v)throw m}}}}catch(w){u=!0,h=w}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}return"digraph {\n   "+t.join(";\n   ")+"\n\n   "+l.join(";\n   ")+"\n}"}},{key:"parseLayoutString",value:function(e,t){var n=e.includes("\nedge")?e.indexOf("\nedge"):e.length,r=e.substr(0,n).split("\nnode ").slice(1).map(function(e){return e.substr(0,e.indexOf('"'))}).map(function(e){return e.matchAll(ie).next().value});r.forEach(function(e){x(void 0!==e)});var i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,u=Object(g.a)(c,4),h=u[1],d=u[2],p=u[3],f=parseInt(h,10),v=parseFloat(d),m=parseFloat(p);t.get(f).position=[v,m]}}catch(y){a=!0,o=y}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}}]),e}();T.a.setAppElement("#root");var oe=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={passiveDag:null,nodeSelectionPassiveDag:[]},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.generatePassiveDag();case 2:t=e.sent,this.setState({passiveDag:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.dag===t.dag&&this.props.nodeSelection===t.nodeSelection&&this.props.currentTime===t.currentTime){e.next=5;break}return e.next=3,this.generatePassiveDag();case 3:n=e.sent,this.setState({passiveDag:n});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null===this.state.passiveDag?r.createElement("section",null,"Layouting..."):r.createElement(T.a,{isOpen:!0,contentLabel:"Clauses currently in Passive generated by clause with id ".concat(this.state.passiveDag.activeNodeId),onRequestClose:function(){e.props.onDismissPassiveDag(null,null)}},r.createElement(N,{dag:this.state.passiveDag,nodeSelection:this.state.nodeSelectionPassiveDag,changedNodesEvent:this.props.changedNodesEvent,currentTime:this.props.currentTime,animateDagChanges:!1,onNodeSelectionChange:this.nodeSelectionChange.bind(this),onUpdateNodePositions:this.updateNodePositions.bind(this)}),r.createElement(I,{dag:this.state.passiveDag,currentTime:this.props.currentTime,nodeSelection:this.state.nodeSelectionPassiveDag,infoToggle:this.props.infoToggle,editToggle:this.props.editToggle,onUpdateNodeSelection:this.nodeSelectionChange.bind(this),onLiteralOrientationChange:this.props.onLiteralOrientationChange,onLiteralRepresentationChange:this.props.onLiteralRepresentationChange,onSelectButtonPressed:this.selectButtonPressed.bind(this),onToggleInfo:this.props.onToggleInfo,onToggleEdit:this.props.onToggleEdit}))}},{key:"nodeSelectionChange",value:function(e){this.setState({nodeSelectionPassiveDag:e})}},{key:"updateNodePositions",value:function(e,t){x(null!==this.state.passiveDag);var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=this.state.passiveDag.get(s);x(null!==l.position),l.position=[l.position[0]+t[0],l.position[1]+t[1]]}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"generatePassiveDag",value:function(){var e=Object(m.a)(v.a.mark(function e(){var t,n,r,i,a,o,s,l,c,u,h,d,p,f,m,y,b,S,w,k;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Q(this.props.dag,this.props.nodeSelection,this.props.currentTime),e.next=3,ae.layoutDag(t,!1);case 3:for(n=this.props.dag.get(this.props.nodeSelection[0]).getPosition(),r=Object(g.a)(n,2),i=r[0],a=r[1],o=t.get(this.props.nodeSelection[0]).getPosition(),s=Object(g.a)(o,2),l=s[0],c=s[1],u=i-l,h=a-c,d=!0,p=!1,f=void 0,e.prev=10,m=t.nodes[Symbol.iterator]();!(d=(y=m.next()).done);d=!0)b=y.value,S=Object(g.a)(b,2),S[0],x(null!=(w=S[1]).position),k=w.position,w.position=[k[0]+u,k[1]+h];e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),p=!0,f=e.t0;case 18:e.prev=18,e.prev=19,d||null==m.return||m.return();case 21:if(e.prev=21,!p){e.next=24;break}throw f;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.abrupt("return",t);case 27:case"end":return e.stop()}},e,this,[[10,14,18,26],[19,,21,25]])}));return function(){return e.apply(this,arguments)}}()},{key:"selectButtonPressed",value:function(){var e=this.state.passiveDag;x(null!==e),x(e.isPassiveDag),x(null!==e.activeNodeId),x(1===this.state.nodeSelectionPassiveDag.length);var t=this.state.nodeSelectionPassiveDag[0];x(null!==t);var n=e.styleMap;x(null!==n),x("passive"===n.get(t));var r=this.props.dag.get(this.state.passiveDag.activeNodeId).position;x(null!==r),this.props.onDismissPassiveDag(t,r)}}]),t}(r.Component),se=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e;return this.props.showPassiveDag&&(e=r.createElement(oe,{dag:this.props.dag,nodeSelection:this.props.nodeSelection,currentTime:this.props.currentTime,changedNodesEvent:this.props.changedNodesEvent,infoToggle:this.props.infoToggle,editToggle:this.props.editToggle,onLiteralOrientationChange:this.props.onLiteralOrientationChange,onLiteralRepresentationChange:this.props.onLiteralRepresentationChange,onDismissPassiveDag:this.props.onDismissPassiveDag,onToggleInfo:this.props.onToggleInfo,onToggleEdit:this.props.onToggleEdit})),r.createElement("main",null,r.createElement(N,{dag:this.props.dag,nodeSelection:this.props.nodeSelection,changedNodesEvent:this.props.changedNodesEvent,currentTime:this.props.currentTime,animateDagChanges:this.props.animateDagChanges,onNodeSelectionChange:this.props.onNodeSelectionChange,onUpdateNodePositions:this.props.onUpdateNodePositions}),e,r.createElement(b,{historyLength:this.props.historyLength,currentTime:this.props.currentTime,onCurrentTimeChange:this.props.onCurrentTimeChange}))}}]),t}(r.Component),le=(n(76),n(17)),ce=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{className:"component-graph-menu"},r.createElement("section",{className:"component-graph-menu-content"},r.createElement("button",{title:"Undo last graph transformation",disabled:!this.props.undoEnabled,onClick:this.props.onUndo},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(le,"#graph-undo")}))),r.createElement("button",{title:"Render selection only (up)",disabled:!this.props.filterUpEnabled,onClick:this.props.onRenderParentsOnly},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(le,"#graph-up")}))),r.createElement("button",{title:"Render selection only (down)",disabled:!this.props.filterDownEnabled,onClick:this.props.onRenderChildrenOnly},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(le,"#graph-down")}))),r.createElement("button",{title:"Select clauses",disabled:!this.props.passiveDagButtonEnabled,onClick:function(){e.props.onShowPassiveDag()}},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(le,"#graph-s")})))))}}]),t}(r.Component),ue=(n(77),n(17)),he=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("section",{className:"component-node-menu"},r.createElement("button",{title:"Select parents of selected nodes",disabled:!this.props.nodeSelection.length,onClick:this.props.onSelectParents},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(ue,"#node-parents")}))),r.createElement("button",{title:"Select children of selected nodes",disabled:!this.props.nodeSelection.length,onClick:this.props.onSelectChildren},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(ue,"#node-children")}))),r.createElement("button",{title:"Find common consequences of selected nodes",disabled:this.props.nodeSelection.length<2,onClick:this.props.onSelectCommonConsequences},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(ue,"#node-consequences")}))))}}]),t}(r.Component),de=(n(78),function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={foundNodes:[]},n.searchField1=r.createRef(),n.searchField2=r.createRef(),n.searchField3=r.createRef(),n.toListItem=function(e){return r.createElement("li",{key:e.id,onClick:function(){return n.props.onUpdateNodeSelection([e.id])}},e.toString())},n.getDisabledListItem=function(){return r.createElement("li",{className:"disabled-element"},"...")},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.dag===e.dag&&this.props.currentTime===e.currentTime||(this.searchField1.current.value="",this.searchField2.current.value="",this.searchField3.current.value="",this.setState({foundNodes:[]}))}},{key:"render",value:function(){var e=this,t=this.state.foundNodes;return r.createElement("section",{className:"component-search"},r.createElement("input",{type:"text",ref:this.searchField1,placeholder:"Search for nodes including literal",onKeyUp:this.search.bind(this),disabled:null===this.props.dag}),r.createElement("input",{type:"text",ref:this.searchField2,placeholder:"Search for nodes excluding literals",onKeyUp:this.search.bind(this),disabled:null===this.props.dag}),r.createElement("input",{type:"text",ref:this.searchField3,placeholder:"Search for nodes using inference rule",onKeyUp:this.search.bind(this),disabled:null===this.props.dag}),r.createElement("ul",{id:"searchResults"},t.slice(0,21).map(function(t){return e.toListItem(t)}),t.length>20&&this.getDisabledListItem()))}},{key:"search",value:function(){x(null!==this.props.dag),x(this.searchField1.current),x(this.searchField2.current),x(this.searchField3.current);var e=this.searchField1.current.value,t=this.searchField2.current.value,n=this.searchField3.current.value;if(""===e&&""===t&&""===n)return this.props.onUpdateNodeSelection([]),void this.setState({foundNodes:[]});var r=Array.from(this.props.dag.nodes.values());if(""!==e){for(var i=new Array,a=0,o=r;a<o.length;a++){var s=o[a];if("Clause"===s.unit.type){var l=s.unit,c=!1,u=!0,h=!1,d=void 0;try{for(var p,g=l.premiseLiterals[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){if(p.value.toString(!0).includes(e)){c=!0;break}}}catch(he){h=!0,d=he}finally{try{u||null==g.return||g.return()}finally{if(h)throw d}}if(!c){var f=!0,v=!1,m=void 0;try{for(var y,b=l.conclusionLiterals[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){if(y.value.toString(!1).includes(e)){c=!0;break}}}catch(he){v=!0,m=he}finally{try{f||null==b.return||b.return()}finally{if(v)throw m}}}if(!c){var S=!0,w=!1,k=void 0;try{for(var E,N=l.contextLiterals[Symbol.iterator]();!(S=(E=N.next()).done);S=!0){if(E.value.toString(!1).includes(e)){c=!0;break}}}catch(he){w=!0,k=he}finally{try{S||null==N.return||N.return()}finally{if(w)throw k}}}c&&i.push(s)}}r=i}if(""!==t){var C=new Array,T=!0,O=!1,L=void 0;try{for(var j,P=r[Symbol.iterator]();!(T=(j=P.next()).done);T=!0){var R=j.value;if("Clause"===R.unit.type){var A=R.unit,I=!1,D=!0,F=!1,M=void 0;try{for(var B,q=A.premiseLiterals[Symbol.iterator]();!(D=(B=q.next()).done);D=!0){if(B.value.toString(!0).includes(t)){I=!0;break}}}catch(he){F=!0,M=he}finally{try{D||null==q.return||q.return()}finally{if(F)throw M}}if(!I){var U=!0,V=!1,H=void 0;try{for(var W,$=A.conclusionLiterals[Symbol.iterator]();!(U=(W=$.next()).done);U=!0){if(W.value.toString(!1).includes(t)){I=!0;break}}}catch(he){V=!0,H=he}finally{try{U||null==$.return||$.return()}finally{if(V)throw H}}}if(!I){var z=!0,J=!1,K=void 0;try{for(var G,X=A.contextLiterals[Symbol.iterator]();!(z=(G=X.next()).done);z=!0){if(G.value.toString(!1).includes(t)){I=!0;break}}}catch(he){J=!0,K=he}finally{try{z||null==X.return||X.return()}finally{if(J)throw K}}}I||C.push(R)}}}catch(he){O=!0,L=he}finally{try{T||null==P.return||P.return()}finally{if(O)throw L}}r=C}if(""!==n){var _=new Array,Y=!0,Z=!1,Q=void 0;try{for(var ee,te=r[Symbol.iterator]();!(Y=(ee=te.next()).done);Y=!0){var ne=ee.value;ne.inferenceRule===n&&_.push(ne)}}catch(he){Z=!0,Q=he}finally{try{Y||null==te.return||te.return()}finally{if(Z)throw Q}}r=_}var re=this.props.dag.computeNodesInActiveDag(this.props.currentTime),ie=new Array,ae=!0,oe=!1,se=void 0;try{for(var le,ce=r[Symbol.iterator]();!(ae=(le=ce.next()).done);ae=!0){var ue=le.value;re.has(ue.id)&&ie.push(ue)}}catch(he){oe=!0,se=he}finally{try{ae||null==ce.return||ce.return()}finally{if(oe)throw se}}(r=ie).sort(function(e,t){var n=e.unit,r=t.unit;return n.toString().length-r.toString().length}),this.props.onUpdateNodeSelection(r.map(function(e){return e.id})),this.setState({foundNodes:r})}}]),t}(r.Component)),pe=(n(79),function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("section",{className:"component-node-card"},r.createElement("article",null,r.createElement("h2",null,"Select Nodes"),r.createElement(he,{nodeSelection:this.props.nodeSelection,onSelectParents:this.props.onSelectParents,onSelectChildren:this.props.onSelectChildren,onSelectCommonConsequences:this.props.onSelectCommonConsequences}),r.createElement(de,{dag:this.props.dag,currentTime:this.props.currentTime,onUpdateNodeSelection:this.props.onUpdateNodeSelection})))}}]),t}(r.Component)),ge=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){null===this.props.dag&&(x(0===this.props.nodeSelection.length),x(!this.props.multipleVersions));var e=null!==this.props.dag&&this.props.nodeSelection.length>0;return r.createElement("div",{className:"scroll"},r.createElement("aside",null,r.createElement(ce,{undoEnabled:null!==this.props.dag&&this.props.multipleVersions,filterUpEnabled:null!==this.props.dag&&this.props.nodeSelection.length>0&&!this.props.dag.isPassiveDag,filterDownEnabled:null!==this.props.dag&&this.props.nodeSelection.length>0&&!this.props.dag.isPassiveDag,passiveDagButtonEnabled:e,onUndo:this.props.onUndo,onRenderParentsOnly:this.props.onRenderParentsOnly,onRenderChildrenOnly:this.props.onRenderChildrenOnly,onShowPassiveDag:this.props.onShowPassiveDag}),r.createElement(pe,{dag:this.props.dag,currentTime:this.props.currentTime,nodeSelection:this.props.nodeSelection,onUpdateNodeSelection:this.props.onUpdateNodeSelection,onSelectParents:this.props.onSelectParents,onSelectChildren:this.props.onSelectChildren,onSelectCommonConsequences:this.props.onSelectCommonConsequences}),r.createElement(R,{dag:this.props.dag,nodeSelection:this.props.nodeSelection,currentTime:this.props.currentTime,infoToggle:this.props.infoToggle,editToggle:this.props.editToggle,onLiteralOrientationChange:this.props.onLiteralOrientationChange,onLiteralRepresentationChange:this.props.onLiteralRepresentationChange,onToggleInfo:this.props.onToggleInfo,onToggleEdit:this.props.onToggleEdit})))}}]),t}(r.Component);n(80);function fe(e,t){x(e.length===t.length);for(var n=0;n<e.length;n++){var r=e[n],i=t[n];r.setLiteralInParent(i)}}function ve(e,t,n,r){x(r?e.length<t.length:e.length+1===t.length);for(var i=!1,a=0,o=0;a<e.length;){var s=e[a],l=t[o];$(s,l,n)?(s.setLiteralInParent(l),a+=1,o+=1):(x(!i||r,"case 2 error:\n".concat(e.toString(),"\n").concat(t.toString())),i=!0,o+=1)}}function me(e,t,n){x(e.length===t.length);for(var r=!1,i=1;i<e.length;){var a=e[i],o=t[i-1];if(!$(a,o,n)){e[0].setLiteralInParent(t[i-1]),r=!0;break}a.setLiteralInParent(o),i+=1}for(r||(x(i===e.length),e[0].setLiteralInParent(t[t.length-1]));i<e.length;){var s=e[i],l=t[i];x($(s,l,n)),s.setLiteralInParent(l),i+=1}}function ye(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.nodes.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!o.isBoundary&&"Clause"===o.unit.type){var s=o.unit;if("evaluation"===o.inferenceRule||"forward subsumption demodulation"===o.inferenceRule||"term algebras injectivity"===o.inferenceRule&&1==o.parents.length||"subsumption resolution"===o.inferenceRule||"equality resolution"===o.inferenceRule||"trivial inequality removal"===o.inferenceRule||"factoring"===o.inferenceRule||"duplicate literal removal"===o.inferenceRule||"term algebras distinctness"===o.inferenceRule&&1==o.parents.length||"forward demodulation"===o.inferenceRule||"backward demodulation"===o.inferenceRule||"equality factoring"===o.inferenceRule){x(o.parents.length>0);var l="backward demodulation"===o.inferenceRule,c=e.get(o.parents[l?1:0]);if("Clause"===c.unit.type){var u=c.unit;x(null!==o.newTime),x(null!==c.newTime);var h=null!==c.activeTime&&c.activeTime<=o.newTime?u.literalsActiveEvent:u.literalsNewEvent,d=s.literalsNewEvent;if(x(null!==h),x(null!==d),"evaluation"===o.inferenceRule&&d.length===h.length||"forward subsumption demodulation"===o.inferenceRule||"term algebras injectivity"===o.inferenceRule)fe(d,h);else if("subsumption resolution"===o.inferenceRule||"equality resolution"===o.inferenceRule||"trivial inequality removal"===o.inferenceRule||"factoring"===o.inferenceRule||"duplicate literal removal"===o.inferenceRule||"term algebras distinctness"===o.inferenceRule||"evaluation"===o.inferenceRule&&d.length+1===h.length){ve(d,h,"equality resolution"===o.inferenceRule||"factoring"===o.inferenceRule,"trivial inequality removal"===o.inferenceRule||"duplicate literal removal"===o.inferenceRule)}else if("forward demodulation"===o.inferenceRule||"backward demodulation"===o.inferenceRule||"equality factoring"===o.inferenceRule){me(d,h,"equality factoring"===o.inferenceRule)}}}else if("resolution"===o.inferenceRule||"superposition"===o.inferenceRule){x(2==o.parents.length);var p=e.get(o.parents[0]),g=e.get(o.parents[1]);if("Clause"===p.unit.type&&"Clause"===g.unit.type){var f=p.unit,v=g.unit;x(null!==o.newTime),x(null!==p.newTime),x(null!==g.newTime);var m=null!==p.activeTime&&p.activeTime<=o.newTime,y=null!==g.activeTime&&g.activeTime<=o.newTime,b=m?f.literalsActiveEvent:f.literalsNewEvent,S=y?v.literalsActiveEvent:v.literalsNewEvent,w=s.literalsNewEvent;if(x(null!==b),x(null!==S),x(null!==w),x(b.length>0),x(S.length>0),"resolution"===o.inferenceRule){x(w.length+2===b.length+S.length);var k=b.length-1;ve(w.slice(0,k),b,!0,!1),ve(w.slice(k,w.length),S,!0,!1)}else if("superposition"===o.inferenceRule){x(w.length+1===b.length+S.length);var E=b.length;me(w.slice(0,E),b,!0),ve(w.slice(E,w.length),S,!0,!1)}}}}}}catch(N){n=!0,r=N}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}function be(e,t){x(null===t||e.nodes.has(t));var n=new Set;null!==t&&n.add(t);for(var r=new H(e);r.hasNext();){var i=r.getNext();if(!i.isBoundary&&"Clause"===i.unit.type){var a=i.unit,o=null===t||i.id===t;if(!o){var s=!0,l=!1,c=void 0;try{for(var u,h=i.parents[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;if(n.has(d)){o=!0;break}}}catch(F){l=!0,c=F}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}if(!o)continue;var p="equality resolution"===i.inferenceRule&&!0===e.get(i.parents[0]).isFromPreprocessing,g="subsumption resolution"===i.inferenceRule||"equality resolution"===i.inferenceRule&&!p||"equality factoring"===i.inferenceRule||"forward demodulation"===i.inferenceRule||"backward demodulation"===i.inferenceRule||"forward subsumption demodulation"===i.inferenceRule||"factoring"===i.inferenceRule||"duplicate literal removal"===i.inferenceRule||"evaluation"===i.inferenceRule||"trivial inequality removal"===i.inferenceRule||"term algebras injectivity"===i.inferenceRule&&1==i.parents.length||"term algebras distinctness"===i.inferenceRule&&1==i.parents.length,f="resolution"===i.inferenceRule||"superposition"===i.inferenceRule,v=new Array,m=new Array,y=new Array,b=!0,S=!1,w=void 0;try{for(var k,E=function(){var t=k.value,n=null,r=t.literalInParent;if("user"!==t.orientationReason&&(g||f)){if(x(null!==r),t.representation=r.representation,g){x(i.parents.length>0);var o="backward demodulation"===i.inferenceRule,s=e.get(i.parents[o?1:0]);if("Clause"===s.unit.type){var l=s.unit;l.premiseLiterals.find(function(e){return e===r})?n="premise":l.conclusionLiterals.find(function(e){return e===r})?n="conclusion":(x(l.contextLiterals.find(function(e){return e===r})),n="context")}}else if(f){x(2==i.parents.length);var c=e.get(i.parents[0]),u=e.get(i.parents[1]);if("Clause"===c.unit.type&&"Clause"===u.unit.type){var h=c.unit,d=u.unit;h.premiseLiterals.find(function(e){return e===r})?n="premise":h.conclusionLiterals.find(function(e){return e===r})?n="conclusion":h.contextLiterals.find(function(e){return e===r})?n="context":d.premiseLiterals.find(function(e){return e===r})?n="premise":d.conclusionLiterals.find(function(e){return e===r})?n="conclusion":(x(d.contextLiterals.find(function(e){return e===r})),n="context")}}t.orientationReason="inherited"}else"none"!==t.orientationReason?a.premiseLiterals.find(function(e){return e===t})?n="premise":a.conclusionLiterals.find(function(e){return e===t})?n="conclusion":(x(a.contextLiterals.find(function(e){return e===t})),n="context"):(n=t.negated&&"="!==t.name?"premise":"conclusion",t.orientationReason="heuristic");"premise"===n?v.push(t):"conclusion"===n?m.push(t):(x("context"===n),y.push(t))},N=a.premiseLiterals.concat(a.conclusionLiterals,a.contextLiterals)[Symbol.iterator]();!(b=(k=N.next()).done);b=!0)E()}catch(F){S=!0,w=F}finally{try{b||null==N.return||N.return()}finally{if(S)throw w}}var C=!1,T=!0,O=!1,L=void 0;try{for(var j,P=a.premiseLiterals.concat(a.conclusionLiterals,a.contextLiterals)[Symbol.iterator]();!(T=(j=P.next()).done);T=!0){if("user"===j.value.orientationReason){C=!0;break}}}catch(F){O=!0,L=F}finally{try{T||null==P.return||P.return()}finally{if(O)throw L}}if(!C&&g){var R="backward demodulation"===i.inferenceRule,A=e.get(i.parents[R?1:0]);"Clause"===A.unit.type&&function(){for(var e=A.unit,t=new Map,n=0;n<e.premiseLiterals.length;n++){var r=e.premiseLiterals[n];t.set(r,n)}for(var i=new Map,a=0;a<e.conclusionLiterals.length;a++){var o=e.conclusionLiterals[a];i.set(o,a)}for(var s=new Map,l=0;l<e.contextLiterals.length;l++){var c=e.contextLiterals[l];s.set(c,l)}v.sort(function(e,n){x(null!==e.literalInParent),x(null!==n.literalInParent);var r=t.get(e.literalInParent),i=t.get(n.literalInParent);return x(void 0!==r),x(void 0!==i),r-i}),m.sort(function(e,t){x(null!==e.literalInParent),x(null!==t.literalInParent);var n=i.get(e.literalInParent),r=i.get(t.literalInParent);return x(void 0!==n),x(void 0!==r),n-r}),y.sort(function(e,t){x(null!==e.literalInParent),x(null!==t.literalInParent);var n=s.get(e.literalInParent),r=s.get(t.literalInParent);return x(void 0!==n),x(void 0!==r),n-r})}()}else if(!C&&f){x(2==i.parents.length);var I=e.get(i.parents[0]),D=e.get(i.parents[1]);"Clause"===I.unit.type&&"Clause"===D.unit.type&&function(){for(var e=I.unit,t=D.unit,n=new Map,r=0;r<e.premiseLiterals.length;r++){var i=e.premiseLiterals[r];n.set(i,r)}for(var a=0;a<t.premiseLiterals.length;a++){var o=t.premiseLiterals[a];n.set(o,a+e.premiseLiterals.length)}for(var s=new Map,l=0;l<e.conclusionLiterals.length;l++){var c=e.conclusionLiterals[l];s.set(c,l)}for(var u=0;u<t.conclusionLiterals.length;u++){var h=t.conclusionLiterals[u];s.set(h,u+e.conclusionLiterals.length)}for(var d=new Map,p=0;p<e.contextLiterals.length;p++){var g=e.contextLiterals[p];d.set(g,p)}for(var f=0;f<t.contextLiterals.length;f++){var b=t.contextLiterals[f];d.set(b,f+e.contextLiterals.length)}v.sort(function(e,t){x(null!==e.literalInParent),x(null!==t.literalInParent);var r=n.get(e.literalInParent),i=n.get(t.literalInParent);return x(void 0!==r),x(void 0!==i),r-i}),m.sort(function(e,t){x(null!==e.literalInParent),x(null!==t.literalInParent);var n=s.get(e.literalInParent),r=s.get(t.literalInParent);return x(void 0!==n),x(void 0!==r),n-r}),y.sort(function(e,t){x(null!==e.literalInParent),x(null!==t.literalInParent);var n=d.get(e.literalInParent),r=d.get(t.literalInParent);return x(void 0!==n),x(void 0!==r),n-r})}()}a.premiseLiterals=v,a.conclusionLiterals=m,a.contextLiterals=y,n.add(i.id)}}return n}var Se=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={state:"waiting",dags:[],nodeSelection:[],currentTime:0,animateDagChanges:!1,changedNodesEvent:void 0,message:"",showPassiveDag:!1,nodeIdToActivate:null,infoToggle:!1,editToggle:!1},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t,n=this.state,i=n.state,a=n.dags,o=n.nodeSelection,s=n.currentTime,l=n.animateDagChanges,c=n.changedNodesEvent,u=n.message,h=n.showPassiveDag;return"loaded"===i||"loaded select"===i?(x(a.length>0),e=a[a.length-1],t=r.createElement(se,{dag:e,showPassiveDag:h,nodeSelection:o,changedNodesEvent:c,historyLength:a[0].maximalActiveTime(),currentTime:s,animateDagChanges:l,infoToggle:this.state.infoToggle,editToggle:this.state.editToggle,onNodeSelectionChange:this.updateNodeSelection.bind(this),onCurrentTimeChange:this.updateCurrentTime.bind(this),onDismissPassiveDag:this.dismissPassiveDag.bind(this),onUpdateNodePositions:this.updateNodePositions.bind(this),onLiteralOrientationChange:this.changeLiteralOrientation.bind(this),onLiteralRepresentationChange:this.changeLiteralRepresentation.bind(this),onToggleInfo:this.toggleInfo.bind(this),onToggleEdit:this.toggleEdit.bind(this)})):(e=null,t=r.createElement("main",null,r.createElement("section",{className:"graph-placeholder"},u),r.createElement("section",{className:"slider-placeholder"}))),r.createElement("div",{className:"app"},t,r.createElement(ge,{dag:e,currentTime:s,nodeSelection:o,multipleVersions:a.length>1,infoToggle:this.state.infoToggle,editToggle:this.state.editToggle,onUpdateNodeSelection:this.updateNodeSelection.bind(this),onUndo:this.undoLastStep.bind(this),onRenderParentsOnly:this.renderParentsOnly.bind(this),onRenderChildrenOnly:this.renderChildrenOnly.bind(this),onShowPassiveDag:this.showPassiveDag.bind(this),onSelectParents:this.selectParents.bind(this),onSelectChildren:this.selectChildren.bind(this),onSelectCommonConsequences:this.selectCommonConsequences.bind(this),onLiteralOrientationChange:this.changeLiteralOrientation.bind(this),onLiteralRepresentationChange:this.changeLiteralRepresentation.bind(this),onToggleInfo:this.toggleInfo.bind(this),onToggleEdit:this.toggleEdit.bind(this)}))}},{key:"componentDidMount",value:function(){var e=Object(m.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runVampire(this.props.problem,this.props.vampireUserOptions,this.props.mode);case 2:"loaded select"===this.state.state&&"manualcs"===this.props.mode&&this.selectFinalPreprocessingClauses();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateNodeSelection",value:function(e){this.props.logging&&console.log("Updating node selection to [".concat(e.toString(),"]")),this.setState({nodeSelection:e})}},{key:"updateCurrentTime",value:function(e){this.props.logging&&console.log("Updating current time to ".concat(e));var t=this.state.dags;x(t.length>0);var n=t[t.length-1].computeNodesInActiveDag(e),r=new Array,i=!0,a=!1,o=void 0;try{for(var s,l=this.state.nodeSelection[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;n.has(c)&&r.push(c)}}catch(u){a=!0,o=u}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}this.setState({nodeSelection:r,currentTime:e})}},{key:"jsonToParsedLines",value:function(e){var t=new Array,n=!0,r=!1,i=void 0;try{for(var a,o=e.lines[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=new Map;for(var c in s.statistics){var u=s.statistics[c];"number"===typeof u&&l.set(c,u)}t.push(new K(s.lineType,s.unitId,s.unitString,s.inferenceRule,s.parents,l))}}catch(h){r=!0,i=h}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"runVampire",value:function(){var e=Object(m.a)(v.a.mark(function e(t,n,r){var i,a,o,s,l,c,u,h,d,p,g,f,m,y,b;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({state:"waiting",message:"Waiting for Vampire...",dags:[],nodeSelection:[],currentTime:0}),i="manualcs"===r?"http://localhost:5000/vampire/startmanualcs":"http://localhost:5000/vampire/start",this.props.logging&&console.log("Starting request to url '".concat(i,"' with Vampire-user-options '").concat(n,"'.")),e.next=5,fetch(i,{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({file:t,vampireUserOptions:n})});case 5:return a=e.sent,e.prev=6,e.next=9,a.json();case 9:if(o=e.sent,this.props.logging&&console.log("Received response from Vampire server."),"success"!==o.status){e.next=75;break}if(x("running"===o.vampireState||"refutation"===o.vampireState||"saturation"===o.vampireState||"timeout"===o.vampireState),"proof"!==r){e.next=23;break}if(x("running"!==o.vampireState),"saturation"!==o.vampireState){e.next=18;break}return this.setState({state:"error",message:"Saturation: Vampire saturated, so there exists no proof!",dags:[],nodeSelection:[],currentTime:0}),e.abrupt("return");case 18:if("timeout"!==o.vampireState){e.next=21;break}return this.setState({state:"error",message:"Timeout: Vampire could not find a proof in the given time!",dags:[],nodeSelection:[],currentTime:0}),e.abrupt("return");case 21:e.next=26;break;case 23:if("saturation"!==o.vampireState||0!==o.lines.length){e.next=26;break}return this.setState({state:"error",message:"The example was already identified to be satisfiable during Vampire's preprocessing.",dags:[],nodeSelection:[],currentTime:0}),e.abrupt("return");case 26:if(this.props.logging&&console.log("Constructing Vampire-saturation-events from received JSON."),s=this.jsonToParsedLines(o),this.props.logging&&console.log("Constructing saturation graph from Vampire-saturation-events."),l=G.fromParsedLines(s,null),this.props.logging&&console.log("Merging preprocessing-subgraph of saturation graph."),l=Z(l),"proof"!==r){e.next=65;break}x(l.isRefutation),c=!0,u=!1,h=void 0,e.prev=37,d=l.nodes.values()[Symbol.iterator]();case 39:if(c=(p=d.next()).done){e.next=51;break}if("Clause"!==(g=p.value).unit.type){e.next=48;break}if(0!==(f=g.unit).premiseLiterals.length||0!==f.conclusionLiterals.length){e.next=48;break}return(m=new Set).add(g.id),l=X(l,m),e.abrupt("break",51);case 48:c=!0,e.next=39;break;case 51:e.next=57;break;case 53:e.prev=53,e.t0=e.catch(37),u=!0,h=e.t0;case 57:e.prev=57,e.prev=58,c||null==d.return||d.return();case 60:if(e.prev=60,!u){e.next=63;break}throw h;case 63:return e.finish(60);case 64:return e.finish(57);case 65:return this.props.logging&&console.log("Computing layout for saturation graph."),e.next=68,ae.layoutDag(l,!0);case 68:this.props.orientClauses&&(this.props.logging&&console.log("Computing literal flows for saturation graph."),ye(l),this.props.logging&&console.log("Computing clause representations for saturation graph."),be(l,null)),this.setLiteralOptions(l),y="manualcs"==r&&"running"===o.vampireState?"loaded select":"loaded",this.setState({state:y,dags:[l],nodeSelection:[],currentTime:l.maximalActiveTime(),animateDagChanges:!1}),this.props.logging&&console.log("Finished preparation of saturation graph."),e.next=79;break;case 75:x("error"===o.status),x(void 0!==(b=o.message)&&null!==b),this.setState({state:"error",message:b,dags:[],nodeSelection:[],currentTime:0});case 79:e.next=86;break;case 81:if(e.prev=81,e.t1=e.catch(6),"SatVisAssertionError"!==e.t1.name){e.next=85;break}throw e.t1;case 85:this.setState({state:"error",message:"Error: ".concat(e.t1.message),dags:[],nodeSelection:[],currentTime:0});case 86:case"end":return e.stop()}},e,this,[[6,81],[37,53,57,65],[58,,60,64]])}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"selectClause",value:function(){var e=Object(m.a)(v.a.mark(function e(t,n){var r,i,a,o,s,l,c,u,h,d,p,f,m,y,b,S,w,k,E,N,C,T,O,L,j,P,R;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(this.state.dags.length>=1),r=this.state.dags[this.state.dags.length-1],i=r.computeNodesInActiveDag(r.maximalActiveTime()),x(null!==r.mergeMap),a="http://localhost:5000/vampire/select",this.props.logging&&console.log("Starting request to url '".concat(a,"' with selected-id '").concat(t,"'.")),e.next=8,fetch(a,{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t})});case 8:return o=e.sent,e.prev=9,e.next=12,o.json();case 12:if(s=e.sent,this.props.logging&&console.log("Received response from Vampire server."),"success"!==s.status){e.next=71;break}for(this.props.logging&&console.log("Constructing Vampire-saturation-events from received JSON."),l=this.jsonToParsedLines(s),this.props.logging&&console.log("Extending existing saturation graph with Vampire-saturation-events."),c=G.fromParsedLines(l,r),u=c.computeNodesInActiveDag(c.maximalActiveTime()),h=new Map,d=!0,p=!1,f=void 0,e.prev=24,m=c.nodes[Symbol.iterator]();!(d=(y=m.next()).done);d=!0)b=y.value,S=Object(g.a)(b,2),w=S[0],k=S[1],!i.has(w)&&u.has(w)&&h.set(w,k);e.next=32;break;case 28:e.prev=28,e.t0=e.catch(24),p=!0,f=e.t0;case 32:e.prev=32,e.prev=33,d||null==m.return||m.return();case 35:if(e.prev=35,!p){e.next=38;break}throw f;case 38:return e.finish(35);case 39:return e.finish(32);case 40:if(!(h.size>0)){e.next=44;break}return this.props.logging&&console.log("Extending layout to new nodes of saturation graph."),e.next=44,ae.layoutNodesAtPosition(h,n);case 44:for(this.props.orientClauses&&(this.props.logging&&console.log("Updating literal flows for saturation graph."),ye(c),this.props.logging&&console.log("Updating clause representations for saturation graph."),be(c,null)),this.setLiteralOptions(c),E="running"===s.vampireState?"loaded select":"loaded",N=new Array,C=!0,T=!1,O=void 0,e.prev=51,L=h.keys()[Symbol.iterator]();!(C=(j=L.next()).done);C=!0)P=j.value,N.push(P);e.next=59;break;case 55:e.prev=55,e.t1=e.catch(51),T=!0,O=e.t1;case 59:e.prev=59,e.prev=60,C||null==L.return||L.return();case 62:if(e.prev=62,!T){e.next=65;break}throw O;case 65:return e.finish(62);case 66:return e.finish(59);case 67:this.setState({state:E,dags:[c],nodeSelection:N,currentTime:c.maximalActiveTime(),animateDagChanges:!0}),this.props.logging&&console.log("Finished extension of saturation graph."),e.next=75;break;case 71:x("error"===s.status),x(void 0!==(R=s.message)&&null!==R),this.setState({state:"error",message:R,dags:[],nodeSelection:[],currentTime:0});case 75:e.next=82;break;case 77:if(e.prev=77,e.t2=e.catch(9),"SatVisAssertionError"!==e.t2.name){e.next=81;break}throw e.t2;case 81:this.setState({state:"error",message:"Error: ".concat(e.t2.message),dags:[],nodeSelection:[],currentTime:0});case 82:case"end":return e.stop()}},e,this,[[9,77],[24,28,32,40],[33,,35,39],[51,55,59,67],[60,,62,66]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"selectFinalPreprocessingClauses",value:function(){var e=Object(m.a)(v.a.mark(function e(){var t,n,r,i,a,o,s,l,c,u,h;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.logging&&console.log("Starting to select all clauses from preprocessing."),t=!1;case 2:if("loaded select"!==this.state.state||t){e.next=41;break}n=this.state.dags[0],t=!0,r=!0,i=!1,a=void 0,e.prev=8,o=n.nodes[Symbol.iterator]();case 10:if(r=(s=o.next()).done){e.next=25;break}if(l=s.value,c=Object(g.a)(l,2),u=c[0],!(h=c[1]).isFromPreprocessing||null===h.newTime){e.next=22;break}if(null!==h.activeTime||null!==h.deletionTime){e.next=22;break}return x(null!==h.position),e.next=20,this.selectClause(u,h.position);case 20:return t=!1,e.abrupt("break",25);case 22:r=!0,e.next=10;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(8),i=!0,a=e.t0;case 31:e.prev=31,e.prev=32,r||null==o.return||o.return();case 34:if(e.prev=34,!i){e.next=37;break}throw a;case 37:return e.finish(34);case 38:return e.finish(31);case 39:e.next=2;break;case 41:this.props.logging&&console.log("Finished to select all clauses from preprocessing.");case 42:case"end":return e.stop()}},e,this,[[8,27,31,39],[32,,34,38]])}));return function(){return e.apply(this,arguments)}}()},{key:"undoLastStep",value:function(){this.props.logging&&console.log("Pop last saturation graph from the stack."),this.popDag()}},{key:"renderParentsOnly",value:function(){var e=Object(m.a)(v.a.mark(function e(){var t,n,r,i,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.dags,r=t.nodeSelection,i=n[n.length-1],this.props.logging&&console.log("Generate saturation graph which consists only of the (transitive) parents of clauses [".concat(r,"].")),a=X(i,new Set(r)),this.props.logging&&console.log("Computing layout for new saturation graph."),e.next=7,ae.layoutDag(a,!0);case 7:this.props.logging&&console.log("Finished preparation of new saturation graph. Pushing it to the stack."),this.pushDag(a);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderChildrenOnly",value:function(){var e=Object(m.a)(v.a.mark(function e(){var t,n,r,i,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.dags,r=t.nodeSelection,i=n[n.length-1],this.props.logging&&console.log("Generate saturation graph which consists only of the (transitive) children of clauses [".concat(r,"].")),a=_(i,new Set(r)),this.props.logging&&console.log("Computing layout for new saturation graph."),e.next=7,ae.layoutDag(a,!0);case 7:this.props.logging&&console.log("Finished preparation of new saturation graph. Pushing it to the stack."),this.pushDag(a);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showPassiveDag",value:function(){var e=Object(m.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:x(!1===this.state.showPassiveDag),x(this.state.nodeSelection.length>0),this.props.logging&&console.log("Display selection graph containing all clauses which can be selected for activation and whose derivation contains all the clauses [".concat(this.state.nodeSelection,"].")),this.setState({showPassiveDag:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"dismissPassiveDag",value:function(){var e=Object(m.a)(v.a.mark(function e(t,n){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x(null===t===(null===n)),x(!0===this.state.showPassiveDag),this.setState({showPassiveDag:!1}),null===t){e.next=9;break}return this.props.logging&&console.log("Removing selection graph. Clause ".concat(t," was selected.")),e.next=7,this.selectClause(t,n);case 7:e.next=10;break;case 9:this.props.logging&&console.log("Removing selection graph. No clause was selected.");case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"selectParents",value:function(){var e=this.state,t=e.dags,n=e.nodeSelection,r=e.currentTime,i=t[t.length-1],a=i.computeNodesInActiveDag(r),o=new Set(n),s=!0,l=!1,c=void 0;try{for(var u,h=n[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;x(a.has(d));var p=!0,g=!1,f=void 0;try{for(var v,m=i.get(d).parents[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var y=v.value;a.has(y)&&o.add(y)}}catch(b){g=!0,f=b}finally{try{p||null==m.return||m.return()}finally{if(g)throw f}}}}catch(b){l=!0,c=b}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}this.updateNodeSelection(Array.from(o))}},{key:"selectChildren",value:function(){var e=this.state,t=e.dags,n=e.nodeSelection,r=e.currentTime,i=t[t.length-1],a=i.computeNodesInActiveDag(r),o=new Set(n),s=!0,l=!1,c=void 0;try{for(var u,h=n[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;x(a.has(d));var p=!0,g=!1,f=void 0;try{for(var v,m=i.getChildren(d)[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var y=v.value;a.has(y)&&o.add(y)}}catch(b){g=!0,f=b}finally{try{p||null==m.return||m.return()}finally{if(g)throw f}}}}catch(b){l=!0,c=b}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}this.updateNodeSelection(Array.from(o))}},{key:"selectCommonConsequences",value:function(){var e=this.state,t=e.dags,n=e.nodeSelection,r=e.currentTime,i=t[t.length-1],a=i.computeNodesInActiveDag(r),o=function(e,t){for(var n=new Array,r=new Map,i=new H(e);i.hasNext();){var a=i.getNext(),o=a.id,s=new Set;t.has(o)&&s.add(o);var l=!0,c=!1,u=void 0;try{for(var h,d=a.parents[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value,g=r.get(p),f=!0,v=!1,m=void 0;try{for(var y,b=g[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var S=y.value;s.add(S)}}catch(w){v=!0,m=w}finally{try{f||null==b.return||b.return()}finally{if(v)throw m}}}}catch(w){c=!0,u=w}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}r.set(o,s),t.size===s.size&&n.push(o)}return n}(i,new Set(n)),s=new Array,l=!0,c=!1,u=void 0;try{for(var h,d=o[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;a.has(p)&&s.push(p)}}catch(g){c=!0,u=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}this.updateNodeSelection(s)}},{key:"changeLiteralOrientation",value:function(e,t,n){var r=this.state.dags;x(r.length>0);var i=r[0],a=(r[r.length-1],i.nodes.get(e));x(void 0!==a),x("Clause"===a.unit.type),a.unit.changeLiteralOrientation(t,n);var o=be(i,e);this.setState({changedNodesEvent:o})}},{key:"changeLiteralRepresentation",value:function(e,t){var n=this.state.dags;x(n.length>0);var r=n[0];x(void 0!==r.nodes.get(e)),t.switchToNextRepresentation();var i=be(r,e);this.setState({changedNodesEvent:i})}},{key:"updateNodePositions",value:function(e,t){var n=this.state.dags;x(this.state.dags.length>0);var r=n[n.length-1],i=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,u=r.get(c);x(null!==u.position),u.position=[u.position[0]+t[0],u.position[1]+t[1]]}}catch(h){a=!0,o=h}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}},{key:"pushDag",value:function(e){x(!e.isPassiveDag);var t=this.state,n=t.dags,r=t.nodeSelection,i=new Array,a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;e.nodes.has(u)&&i.push(u)}}catch(h){o=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}this.setState({dags:n.concat([e]),nodeSelection:i,animateDagChanges:!1})}},{key:"popDag",value:function(){x(this.state.dags.length>1,"Undo last step must only be called if there exist at least two dags"),this.setState(function(e,t){return{dags:e.dags.slice(0,e.dags.length-1),animateDagChanges:!1}})}},{key:"setLiteralOptions",value:function(e){var t=this.props.hideBracketsAssoc,n=this.props.nonStrictForNegatedStrictInequalities,r=!0,i=!1,a=void 0;try{for(var o,s=e.nodes.values()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;if("Clause"===l.unit.type){var c=l.unit,u=!0,h=!1,d=void 0;try{for(var p,g=c.premiseLiterals[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){var f=p.value;f.hideBracketsAssoc=t,f.nonStrictForNegatedStrictInequalities=n}}catch(k){h=!0,d=k}finally{try{u||null==g.return||g.return()}finally{if(h)throw d}}var v=!0,m=!1,y=void 0;try{for(var b,S=c.conclusionLiterals[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var w=b.value;w.hideBracketsAssoc=t,w.nonStrictForNegatedStrictInequalities=n}}catch(k){m=!0,y=k}finally{try{v||null==S.return||S.return()}finally{if(m)throw y}}}}}catch(k){i=!0,a=k}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"toggleInfo",value:function(){this.setState({infoToggle:!this.state.infoToggle})}},{key:"toggleEdit",value:function(){this.setState({editToggle:!this.state.editToggle})}}]),t}(r.Component),we=(n(81),function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("div",{id:"appWrapper"},r.createElement(p,{name:this.props.name}),r.createElement(Se,{problem:this.props.problem,vampireUserOptions:this.props.vampireUserOptions,mode:this.props.mode,hideBracketsAssoc:this.props.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:this.props.nonStrictForNegatedStrictInequalities,orientClauses:this.props.orientClauses,logging:this.props.logging}))}}]),t}(r.Component)),ke=(n(82),n(43)),xe=n(17),Ee=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).isChromeOrFirefox=navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Firefox")>-1,n.fileUpload=r.createRef(),n.monacoDiv=r.createRef(),n.monaco=null,n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.isChromeOrFirefox&&(this.monaco=ke.a.create(this.monacoDiv.current,{lineNumbers:"off",roundedSelection:!1,scrollBeyondLastLine:!1,scrollBeyondLastColumn:0,minimap:{enabled:!1},renderLineHighlight:"none",hideCursorInOverviewRuler:!0,links:!1,overviewRulerBorder:!1,automaticLayout:!0,lineDecorationsWidth:0,lineNumbersMinChars:0,wordWrap:"wordWrapColumn"}),this.monaco.setValue(this.props.problem),this.monaco.getModel().onDidChangeContent(function(){e.props.onChangeProblem(e.monaco.getModel().getValue())}))}},{key:"componentDidUpdate",value:function(e){x(this.isChromeOrFirefox),this.props.problem!==e.problem&&this.monaco.setValue(this.props.problem)}},{key:"render",value:function(){return this.isChromeOrFirefox?r.createElement("section",{className:"component-menu"},r.createElement("h1",null,"Vampire Saturation Visualization"),r.createElement("section",{className:"editor"},r.createElement("div",{className:"editor-spacer"},r.createElement("main",null,r.createElement("div",{className:"headline-wrapper"},r.createElement("h2",null,"Input"),r.createElement("small",{className:"file-name"},this.props.problemName),r.createElement("button",{title:"Pick a new file",onClick:this.chooseFile.bind(this)},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon big"},r.createElement("use",{xlinkHref:"".concat(xe,"#graph-upload")})))),r.createElement("input",{ref:this.fileUpload,type:"file",onChange:this.uploadEncoding.bind(this)}),r.createElement("div",{ref:this.monacoDiv,className:"monaco"})),r.createElement("aside",null,r.createElement("fieldset",{className:"options-card"},r.createElement("h3",null,"Vampire Options"),r.createElement("ul",null,r.createElement("li",null,r.createElement("label",{htmlFor:"inputSyntax",className:"form-label"},"Input language"),r.createElement("select",{id:"inputSyntax",onChange:this.changeInputSyntax.bind(this),value:this.props.inputSyntax},r.createElement("option",{value:"smtlib"},"SMTLIB"),r.createElement("option",{value:"tptp"},"TPTP"))),r.createElement("li",null,r.createElement("label",{htmlFor:"userOptions",className:"form-label"},"Additional Vampire options"),r.createElement("input",{id:"userOptions",type:"text",onChange:this.changeVampireUserOptions.bind(this),value:this.props.vampireUserOptions})))),r.createElement("fieldset",{className:"options-card"},r.createElement("h3",null,"Visualization Options"),r.createElement("ul",null,r.createElement("li",null,r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.hideBracketsAssoc,onChange:this.changeHideBracketsAssoc.bind(this)}),"Hide brackets for associative operators")),r.createElement("li",null,r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.nonStrictForNegatedStrictInequalities,onChange:this.changeNonStrictForNegatedStrictInequalities.bind(this)}),"Show negated strict inequalities as (positive) nonstrict inequalities")),r.createElement("li",null,r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.orientClauses,onChange:this.changeOrientClauses.bind(this)}),"Heuristically orient clauses")),r.createElement("li",null,r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.logging,onChange:this.changeLogging.bind(this)}),"Logging enabled"))))))),r.createElement("section",{className:"run-menu"},r.createElement(u.b,{to:"/proof/",className:"fake-button"},"Find proof"),r.createElement(u.b,{to:"/saturation/",className:"fake-button"},"Find saturation"),r.createElement(u.b,{to:"/manualcs/",className:"fake-button"},"Start manual clause selection"))):r.createElement("section",{className:"unsupported-message"},r.createElement("svg",{viewBox:"0 0 24 24",className:"icon"},r.createElement("use",{xlinkHref:"".concat(xe,"#alert-triangle")})),r.createElement("span",null,"Your current browser is not supported. Please use Chrome or Firefox!"))}},{key:"chooseFile",value:function(){this.fileUpload.current&&this.fileUpload.current.click()}},{key:"uploadEncoding",value:function(e){var t=this;if(null!==e.target.files&&e.target.files.length>0){var n=e.target.files[0],r=new FileReader;r.onloadend=function(){var e=r.result?r.result:"";t.props.onChangeProblem(e),t.props.onChangeProblemName(n.name),n.name.endsWith(".smt")||n.name.endsWith(".smtlib")||n.name.endsWith(".smt2")||n.name.endsWith(".smtlib2")?t.props.onChangeInputSyntax("smtlib"):n.name.endsWith(".tptp")&&t.props.onChangeInputSyntax("tptp")},r.readAsText(n)}}},{key:"changeVampireUserOptions",value:function(e){var t=e.target.value;this.props.onChangeVampireUserOptions(t)}},{key:"changeTextArea",value:function(e){var t=e.target.value;this.props.onChangeProblem(t)}},{key:"changeHideBracketsAssoc",value:function(e){var t=e.target.checked;this.props.onChangeHideBracketsAssoc(t)}},{key:"changeNonStrictForNegatedStrictInequalities",value:function(e){var t=e.target.checked;this.props.onChangeNonStrictForNegatedStrictInequalities(t)}},{key:"changeInputSyntax",value:function(e){var t=e.target.value;this.props.onChangeInputSyntax(t)}},{key:"changeOrientClauses",value:function(e){var t=e.target.checked;this.props.onChangeOrientClauses(t)}},{key:"changeLogging",value:function(e){var t=e.target.checked;this.props.onChangeLogging(t)}}]),t}(r.Component),Ne=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={problem:"",problemName:"",inputSyntax:"smtlib",vampireUserOptions:"",hideBracketsAssoc:!0,nonStrictForNegatedStrictInequalities:!0,orientClauses:!0,logging:!1},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.createElement(u.a,null,r.createElement(h.a,{path:"/",exact:!0,render:function(){return r.createElement(Ee,{problem:e.state.problem,problemName:e.state.problemName,inputSyntax:e.state.inputSyntax,vampireUserOptions:e.state.vampireUserOptions,hideBracketsAssoc:e.state.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:e.state.nonStrictForNegatedStrictInequalities,orientClauses:e.state.orientClauses,logging:e.state.logging,onChangeProblem:e.changeProblem.bind(e),onChangeProblemName:e.changeProblemName.bind(e),onChangeInputSyntax:e.changeInputSyntax.bind(e),onChangeVampireUserOptions:e.changeVampireUserOptions.bind(e),onChangeHideBracketsAssoc:e.changeHideBracketsAssoc.bind(e),onChangeNonStrictForNegatedStrictInequalities:e.changeNonStrictForNegatedStrictInequalities.bind(e),onChangeOrientClauses:e.changeOrientClauses.bind(e),onChangeLogging:e.changeLogging.bind(e)})}}),r.createElement(h.a,{path:"/proof/",render:function(){return e.appComponent("proof")}}),r.createElement(h.a,{path:"/saturation/",render:function(){return e.appComponent("saturation")}}),r.createElement(h.a,{path:"/manualcs/",render:function(){return e.appComponent("manualcs")}}))}},{key:"appComponent",value:function(e){var t="smtlib"===this.state.inputSyntax?"smtlib2":this.state.inputSyntax,n="".concat(this.state.vampireUserOptions," --input_syntax ").concat(t);return r.createElement(we,{name:this.state.problemName,mode:e,problem:this.state.problem,vampireUserOptions:n,hideBracketsAssoc:this.state.hideBracketsAssoc,nonStrictForNegatedStrictInequalities:this.state.nonStrictForNegatedStrictInequalities,orientClauses:this.state.orientClauses,logging:this.state.logging})}},{key:"changeProblem",value:function(e){this.setState({problem:e})}},{key:"changeProblemName",value:function(e){this.setState({problemName:e})}},{key:"changeVampireUserOptions",value:function(e){this.setState({vampireUserOptions:e})}},{key:"changeHideBracketsAssoc",value:function(e){this.setState({hideBracketsAssoc:e})}},{key:"changeNonStrictForNegatedStrictInequalities",value:function(e){this.setState({nonStrictForNegatedStrictInequalities:e})}},{key:"changeInputSyntax",value:function(e){this.setState({inputSyntax:e})}},{key:"changeOrientClauses",value:function(e){this.setState({orientClauses:e})}},{key:"changeLogging",value:function(e){this.setState({logging:e})}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.render(r.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},17:function(e,t,n){e.exports=n.p+"static/media/all.bb66e3ef.svg"},35:function(e,t){},36:function(e,t){},46:function(e,t,n){e.exports=n(153)},51:function(e,t,n){},52:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e){e.exports={boundary:{defaultStyle:{background:"#77aadd",border:"#4477aa"},text:"#000000",shape:"box",highlightStyle:{background:"#ee8866",border:"#ee8866"},markedStyle:{background:"#ffaabb",border:"#ee3377"},hidden:!1},"boundary-hidden":{defaultStyle:{background:"#77aadd",border:"#4477aa"},text:"#000000",shape:"box",highlightStyle:{background:"#ee8866",border:"#ee8866"},markedStyle:{background:"#ffaabb",border:"#ee3377"},hidden:!1},activated:{defaultStyle:{background:"#dddddd",border:"#bbbbbb"},text:"#000000",shape:"box",highlightStyle:{background:"#ee8866",border:"#ee8866"},markedStyle:{background:"#ffaabb",border:"#ee3377"},hidden:!1},"activated-deleted":{defaultStyle:{background:"#dddddd",border:"#bbbbbb"},text:"#000000",shape:"box",highlightStyle:{background:"#ee8866",border:"#ee8866"},markedStyle:{background:"#ffaabb",border:"#ee3377"},hidden:!1},passive:{defaultStyle:{background:"#FF5959",border:"#FF3232"},text:"#000000",shape:"box",highlightStyle:{background:"#f8cfc1",border:"#f8cfc1"},markedStyle:{background:"#ffdde3",border:"#f8adc8"},hidden:!1},deleted:{defaultStyle:{background:"#f8f8f8",border:"#f1f1f1"},text:"#999999",shape:"box",highlightStyle:{background:"#f8cfc1",border:"#f8cfc1"},markedStyle:{background:"#ffdde3",border:"#f8adc8"},hidden:!1},"theory-axiom":{defaultStyle:{background:"#77aadd",border:"#4477aa"},text:"#000000",shape:"box",highlightStyle:{background:"#ee8866",border:"#ee8866"},markedStyle:{background:"#ffaabb",border:"#ee3377"},hidden:!1},"theory-axiom-deleted":{defaultStyle:{background:"#c8ddf1",border:"#b4c8dd"},text:"#999999",shape:"box",highlightStyle:{background:"#f8cfc1",border:"#f8cfc1"},markedStyle:{background:"#ffdde3",border:"#f8adc8"},hidden:!1},conjecture:{defaultStyle:{background:"#44bb99",border:"#009988"},text:"#000000",shape:"box",highlightStyle:{background:"#ee8866",border:"#ee8866"},markedStyle:{background:"#ffaabb",border:"#ee3377"},hidden:!1},preprocessing:{defaultStyle:{background:"#abe0d1",border:"#8cd1c9"},text:"#000000",shape:"box",highlightStyle:{background:"#ee8866",border:"#ee8866"},markedStyle:{background:"#ffaabb",border:"#ee3377"},hidden:!1},"preprocessing-deleted":{defaultStyle:{background:"#abe0d1",border:"#8cd1c9"},text:"#000000",shape:"box",highlightStyle:{background:"#ee8866",border:"#ee8866"},markedStyle:{background:"#ffaabb",border:"#ee3377"},hidden:!1},hidden:{defaultStyle:{background:"#ffffff00",border:"#ffffff00"},text:"#ffffff00",shape:"box",highlightStyle:{background:"#ffffff00",border:"#ffffff00"},markedStyle:{background:"#ffffff00",border:"#ffffff00"},hidden:!0}}},68:function(e,t,n){},75:function(e,t){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){}},[[46,2,3]]]);
//# sourceMappingURL=main.0ba65606.chunk.js.map